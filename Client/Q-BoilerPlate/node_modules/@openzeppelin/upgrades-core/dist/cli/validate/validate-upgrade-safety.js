"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateUpgradeSafety = void 0;
const build_info_file_1 = require("./build-info-file");
const contract_report_1 = require("./contract-report");
const project_report_1 = require("./project-report");
const validations_1 = require("./validations");
/**
 * Validates the upgrade safety of all contracts in the build info dir's build info files.
 * Only contracts that are detected as upgradeable will be validated.
 *
 * @param buildInfoDir Absolute path of build info directory, or undefined to use the default Hardhat or Foundry build-info dir.
 * @param opts Validation options, or undefined to use the default validation options.
 * @returns The project report.
 */
async function validateUpgradeSafety(buildInfoDir, opts = {}) {
    const buildInfoFiles = await (0, build_info_file_1.getBuildInfoFiles)(buildInfoDir);
    const sourceContracts = (0, validations_1.validateBuildInfoContracts)(buildInfoFiles);
    const contractReports = (0, contract_report_1.getContractReports)(sourceContracts, opts);
    return (0, project_report_1.getProjectReport)(contractReports);
}
exports.validateUpgradeSafety = validateUpgradeSafety;
//# sourceMappingURL=validate-upgrade-safety.js.map