!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Debugger",[],t):"object"==typeof exports?exports.Debugger=t():e.Debugger=t()}(global,(()=>(()=>{var e={138:(e,t,n)=>{var r={};e.exports=r,r.themes={};var i=n(837),a=r.styles=n(951),s=Object.defineProperties,o=new RegExp(/[\r\n]+/g);r.supportsColor=n(613).supportsColor,void 0===r.enabled&&(r.enabled=!1!==r.supportsColor()),r.enable=function(){r.enabled=!0},r.disable=function(){r.enabled=!1},r.stripColors=r.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")},r.stylize=function(e,t){if(!r.enabled)return e+"";var n=a[t];return!n&&t in r?r[t](e):n.open+e+n.close};var c=/[|\\{}()[\]^$+*?.]/g;function l(e){var t=function e(){return f.apply(e,arguments)};return t._styles=e,t.__proto__=p,t}var u,d=(u={},a.grey=a.gray,Object.keys(a).forEach((function(e){a[e].closeRe=new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(c,"\\$&")}(a[e].close),"g"),u[e]={get:function(){return l(this._styles.concat(e))}}})),u),p=s((function(){}),d);function f(){var e=Array.prototype.slice.call(arguments),t=e.map((function(e){return null!=e&&e.constructor===String?e:i.inspect(e)})).join(" ");if(!r.enabled||!t)return t;for(var n=-1!=t.indexOf("\n"),s=this._styles,c=s.length;c--;){var l=a[s[c]];t=l.open+t.replace(l.closeRe,l.open)+l.close,n&&(t=t.replace(o,(function(e){return l.close+e+l.open})))}return t}r.setTheme=function(e){if("string"!=typeof e)for(var t in e)!function(t){r[t]=function(n){if("object"==typeof e[t]){var i=n;for(var a in e[t])i=r[e[t][a]](i);return i}return r[e[t]](n)}}(t);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var y=function(e,t){var n=t.split("");return(n=n.map(e)).join("")};for(var g in r.trap=n(571),r.zalgo=n(561),r.maps={},r.maps.america=n(393)(r),r.maps.zebra=n(35)(r),r.maps.rainbow=n(374)(r),r.maps.random=n(987)(r),r.maps)!function(e){r[e]=function(t){return y(r.maps[e],t)}}(g);s(r,function(){var e={};return Object.keys(d).forEach((function(t){e[t]={get:function(){return l([t])}}})),e}())},571:e=>{e.exports=function(e,t){var n="";e=(e=e||"Run the trap, drop the bass").split("");var r={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["ß","Ɓ","Ƀ","ɮ","β","฿"],c:["©","Ȼ","Ͼ"],d:["Ð","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["Ë","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["Ñ","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["Ø","õ","ø","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["®","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["§","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["¥","Ұ","Ӌ"],z:["Ƶ","ɀ"]};return e.forEach((function(e){e=e.toLowerCase();var t=r[e]||[" "],i=Math.floor(Math.random()*t.length);n+=void 0!==r[e]?r[e][i]:e})),n}},561:e=>{e.exports=function(e,t){e=e||"   he is here   ";var n={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},r=[].concat(n.up,n.down,n.mid);function i(e){return Math.floor(Math.random()*e)}function a(e){var t=!1;return r.filter((function(n){t=n===e})),t}return function(e,t){var r,s,o="";for(s in(t=t||{}).up=void 0===t.up||t.up,t.mid=void 0===t.mid||t.mid,t.down=void 0===t.down||t.down,t.size=void 0!==t.size?t.size:"maxi",e=e.split(""))if(!a(s)){switch(o+=e[s],r={up:0,down:0,mid:0},t.size){case"mini":r.up=i(8),r.mid=i(2),r.down=i(8);break;case"maxi":r.up=i(16)+3,r.mid=i(4)+1,r.down=i(64)+3;break;default:r.up=i(8)+1,r.mid=i(6)/2,r.down=i(8)+1}var c=["up","mid","down"];for(var l in c)for(var u=c[l],d=0;d<=r[u];d++)t[u]&&(o+=n[u][i(n[u].length)])}return o}(e,t)}},218:(e,t,n)=>{var r=n(138);e.exports=function(){var e=function(e,t){String.prototype.__defineGetter__(e,t)};e("strip",(function(){return r.strip(this)})),e("stripColors",(function(){return r.strip(this)})),e("trap",(function(){return r.trap(this)})),e("zalgo",(function(){return r.zalgo(this)})),e("zebra",(function(){return r.zebra(this)})),e("rainbow",(function(){return r.rainbow(this)})),e("random",(function(){return r.random(this)})),e("america",(function(){return r.america(this)})),Object.keys(r.styles).forEach((function(t){e(t,(function(){return r.stylize(this,t)}))})),r.setTheme=function(t){"string"!=typeof t?function(t){var n=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexOf","length","localeCompare","match","repeat","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(t).forEach((function(i){if(-1!==n.indexOf(i))console.log("warn: ".red+("String.prototype"+i).magenta+" is probably something you don't want to override.  Ignoring style name");else if("string"==typeof t[i])r[i]=r[t[i]],e(i,(function(){return r[i](this)}));else{var a=function(e){for(var n=e||this,a=0;a<t[i].length;a++)n=r[t[i][a]](n);return n};e(i,a),r[i]=function(e){return a(e)}}}))}(t):console.log("colors.setTheme now only accepts an object, not a string. If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")}}},785:(e,t,n)=>{var r=n(138);e.exports=r,n(218)()},393:e=>{e.exports=function(e){return function(t,n,r){if(" "===t)return t;switch(n%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}},374:e=>{e.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(n,r,i){return" "===n?n:e[t[r++%t.length]](n)}}},987:e=>{e.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(n,r,i){return" "===n?n:e[t[Math.round(Math.random()*(t.length-2))]](n)}}},35:e=>{e.exports=function(e){return function(t,n,r){return n%2==0?t:e.inverse(t)}}},951:e=>{var t={};e.exports=t;var n={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(n).forEach((function(e){var r=n[e],i=t[e]=[];i.open="["+r[0]+"m",i.close="["+r[1]+"m"}))},946:e=>{"use strict";e.exports=function(e,t){var n=(t=t||process.argv).indexOf("--"),r=/^-{1,2}/.test(e)?"":"--",i=t.indexOf(r+e);return-1!==i&&(-1===n||i<n)}},613:(e,t,n)=>{"use strict";var r=n(37),i=n(946),a=process.env,s=void 0;function o(e){var t=function(e){if(!1===s)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==s)return 0;var t=s?1:0;if("win32"===process.platform){var n=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in a)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(e){return e in a}))||"codeship"===a.CI_NAME?1:t;if("TEAMCITY_VERSION"in a)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(a.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in a){var o=parseInt((a.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(a.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(a.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(a.TERM)||"COLORTERM"in a?1:(a.TERM,t)}(e);return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(t)}i("no-color")||i("no-colors")||i("color=false")?s=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(s=!0),"FORCE_COLOR"in a&&(s=0===a.FORCE_COLOR.length||0!==parseInt(a.FORCE_COLOR,10)),e.exports={supportsColor:o,stdout:o(process.stdout),stderr:o(process.stderr)}},794:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyWorkflowCompileResult=t.promoteCompileResult=void 0,t.promoteCompileResult=function(e){const{compilations:t}=e,n=t.flatMap((e=>e.contracts));return{compilations:t,contracts:n}},t.emptyWorkflowCompileResult=function(){return{compilations:[],contracts:[]}}},919:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompileError=void 0;const i=r(n(785)),a=r(n(346));class s extends a.default{constructor(e){var t=e.trim()+"\n\n"+i.default.red("Compilation failed. See above.");super(e.trim()),this.message=t}}t.CompileError=s},583:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Compilations=t.Errors=t.Sources=t.Shims=void 0,t.Shims=a(n(467)),t.Sources=a(n(239)),t.Errors=a(n(919)),t.Compilations=a(n(794)),s(n(748),t)},99:(e,t)=>{"use strict";function n(e){const{contractName:t,contract_name:n,sourcePath:i,source:a,sourceMap:s,deployedSourceMap:o,legacyAST:c,ast:l,abi:u,metadata:d,bytecode:p,deployedBytecode:f,compiler:y,devdoc:g,userdoc:m,immutableReferences:b,generatedSources:h,deployedGeneratedSources:v,db:L}=e;return{contractName:n||t,sourcePath:i,source:a,sourceMap:s,deployedSourceMap:o,legacyAST:c,ast:l,abi:u,metadata:d,bytecode:p?r(p):void 0,deployedBytecode:f?r(f):void 0,compiler:y,devdoc:g,userdoc:m,immutableReferences:b,generatedSources:h,deployedGeneratedSources:v,db:L}}function r(e){if("object"==typeof e)return e;const t=[];return{bytes:e.slice(2).replace(/__[^_]+_*/g,((e,n)=>{const r=e.match(/__([^_]+)_*/);if(null===r)throw new Error("Could not extract link reference name");const i=r[1],a=e.length,s=n/2,o=a/2;return t.push({offsets:[s],name:i,length:o}),"0".repeat(a)})),linkReferences:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.forBytecode=t.forContract=t.forContracts=void 0,t.forContracts=function(e){return Object.values(e).map(n)},t.forContract=n,t.forBytecode=r},749:(e,t)=>{"use strict";function n(e){if(!e)return e;if("string"==typeof e)return e;let{bytes:t,linkReferences:n}=e;return n=n||[],t=n.map((({offsets:e,length:t,name:n})=>e.map((e=>({offset:e,length:t,name:n}))))).reduce(((e,t)=>[...e,...t]),[]).reduce(((e,{offset:t,name:n,length:r})=>{const i=2*r;let a=`__${n.slice(0,i-2)}`;for(;a.length<i;)a+="_";const s=2*t;return`${e.substring(0,s)}${a}${e.substring(s+i)}`}),t),`0x${t}`}Object.defineProperty(t,"__esModule",{value:!0}),t.forBytecode=t.forContract=void 0,t.forContract=function(e){const{contractName:t,sourcePath:r,source:i,sourceMap:a,deployedSourceMap:s,legacyAST:o,ast:c,abi:l,metadata:u,bytecode:d,deployedBytecode:p,compiler:f,devdoc:y,userdoc:g,immutableReferences:m,generatedSources:b,deployedGeneratedSources:h,db:v}=e;return{contract_name:t,sourcePath:r,source:i,sourceMap:a,deployedSourceMap:s,legacyAST:o,ast:c,abi:l,metadata:u,bytecode:n(d),deployedBytecode:n(p),unlinked_binary:n(d),compiler:f,devdoc:y,userdoc:g,immutableReferences:m,generatedSources:b,deployedGeneratedSources:h,db:v}},t.forBytecode=n},467:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NewToLegacy=t.LegacyToNew=void 0,t.LegacyToNew=a(n(99)),t.NewToLegacy=a(n(749))},239:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.collectSources=void 0;const s=a(n(17));function o(e){let t=e;return"\\"===s.sep&&(t=e.replace(/\\/g,"/")),t.length>=2&&":"===t[1]&&(t="/"+t,t=t.replace(":","")),t}function c(e,t,n){return t.endsWith(s.sep)||(t+=s.sep),e.startsWith(t)?n+e.slice(t.length):e}t.collectSources=function(e,t=[],n="",r="/"){return Object.entries(e).filter((([e,t])=>!s.isAbsolute(e)||e.startsWith(n))).map((([e,t])=>({originalSourcePath:e,contents:t,sourcePath:o(c(e,n,r))}))).map((({originalSourcePath:e,sourcePath:n,contents:r})=>({sources:{[n]:r},targets:t.includes(e)?[n]:[],originalSourcePaths:{[n]:e}}))).reduce(((e,t)=>({sources:Object.assign({},e.sources,t.sources),targets:[...e.targets,...t.targets],originalSourcePaths:Object.assign({},e.originalSourcePaths,t.originalSourcePaths)})),{sources:{},targets:[],originalSourcePaths:{}})}},748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},529:(e,t,n)=>{var r=n(65).Z;e.exports=r},65:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ns});var r={};n.r(r),n.d(r,{default:()=>pn,ensResolve:()=>nn,init:()=>un,inspectTransaction:()=>zt,obtainBinaries:()=>Zt,obtainStorage:()=>sn,reverseEnsResolve:()=>Qt,saga:()=>dn});var i={};n.r(i),n.d(i,{addAffectedInstance:()=>Yn,addContext:()=>Gn,addInstance:()=>Hn,begin:()=>zn,callstackAndCodexSaga:()=>Xn,default:()=>nr,recordStorage:()=>Wn,refreshInstances:()=>qn,requestCode:()=>Kn,requestStorage:()=>$n,reset:()=>Jn,saga:()=>tr,setStorageLookup:()=>er,unload:()=>Qn});var a={};n.r(a),n.d(a,{addContracts:()=>Cr,declare:()=>or,decode:()=>mr,decodeCall:()=>hr,decodeLog:()=>vr,decodeReturnValue:()=>br,default:()=>Ir,defineTaggedOutput:()=>dr,defineType:()=>ur,recordAllocations:()=>xr,reset:()=>Lr,saga:()=>Sr,scope:()=>sr,yulDeclare:()=>lr,yulScope:()=>cr});var s={};n.r(s),n.d(s,{begin:()=>zr,default:()=>Xr,reset:()=>Yr,saga:()=>Zr,unload:()=>qr});var o={};n.r(o),n.d(o,{addSources:()=>oi,begin:()=>di,default:()=>fi,reset:()=>li,saga:()=>pi,unload:()=>ui});var c={};n.r(c),n.d(c,{begin:()=>Ti,default:()=>Oi,reset:()=>Ai,saga:()=>Ri,unload:()=>Ei});var l={};n.r(l),n.d(l,{default:()=>Fi,reset:()=>Gi,saga:()=>ji});const u=require("debug");var d=n.n(u);const p=require("@truffle/abi-utils"),f=require("@truffle/codec"),y=require("json-stable-stringify");var g=n.n(y);function m(e){return["ContractDefinition","VariableDeclaration","YulVariableDeclaration","YulBlock"].includes(e.nodeType)}function b(e,t){return Object.defineProperty(t,"name",{value:`${e}.${t.name}`,configurable:!0}),t}function h(e,t){return`${e}:${t}`}function v(e,t,n){let r=e.slice();for(;t>0&&r.length>0;)n(r[r.length-1])&&t--,r.pop();return r}function L(...e){return f.Conversion.toHexString(f.Evm.Utils.keccak256(...e),f.Evm.Utils.WORD_SIZE)}function x(e){return L({type:"string",value:g()(e)})}function C(e,t){let n=x(e);return{...e,id:n,ref:t}}function S(e){return["CALL","DELEGATECALL","STATICCALL","CALLCODE"].includes(e)}function I(e){return["CREATE","CREATE2"].includes(e)}function A(e){return["SELFDESTRUCT","SUICIDE"].includes(e)}const E=require("redux"),T=require("redux-saga");var R=n.n(T);d()("debugger:store:common");const O="CONTROLLER_ADVANCE",w="CONTROLLER_STEP_NEXT",_="CONTROLLER_STEP_OVER",k="CONTROLLER_STEP_INTO",D="CONTROLLER_STEP_OUT",N="CONTROLLER_INTERRUPT",P="CONTROLLER_RUN_TO_END",U="CONTROLLER_CONTINUE",j="CONTROLLER_ADD_BREAKPOINT",F="CONTROLLER_REMOVE_BREAKPOINT",M="CONTROLLER_REMOVE_ALL_BREAKPOINTS",B="CONTROLLER_SET_INTERNAL_STEPPING",V="CONTROLLER_START_STEPPING",G="CONTROLLER_DONE_STEPPING",H="SESSION_START",W="SESSION_LOAD_TRANSACTION",K="SESSION_INTERRUPT",$="SESSION_UNLOAD_TRANSACTION",Y="SESSION_READY";function q(){return{type:Y}}const z="SESSION_WAIT",Z="SESSION_ERROR",X="SESSION_RECORD_CONTRACTS",J="SESSION_SAVE_TRANSACTION",Q="SESSION_SAVE_RECEIPT",ee="SESSION_SAVE_BLOCK",te="SESSION_SET_LIGHT_MODE",ne="SESSION_SET_FULL_MODE",re="SESSION_START_FULL_MODE",ie="SESSION_ADD_COMPILATIONS",ae=require("reselect-tree"),se=require("json-pointer");var oe=n.n(se);const ce=require("lodash/merge");var le=n.n(ce);const ue=require("semver");var de=n.n(ue);const pe={depth:-1,error:"",gas:0,memory:[],stack:[],storage:{},gasCost:0,op:"STOP",pc:-1};const fe=(0,ae.createSelectorTree)({index:e=>e.trace.proc.index,loaded:(0,ae.createLeaf)(["/steps"],(e=>null!==e)),finished:e=>e.trace.proc.finished,finishedOrUnloaded:(0,ae.createLeaf)(["/finished","/loaded"],((e,t)=>e||!t)),steps:e=>e.trace.transaction.steps,stepsRemaining:(0,ae.createLeaf)(["./steps","./index"],((e,t)=>e.length-t)),step:(0,ae.createLeaf)(["./steps","./index"],((e,t)=>e?e.length>0?e[t]:pe:null)),next:(0,ae.createLeaf)(["./steps","./index"],((e,t)=>t<e.length-1?e[t+1]:pe)),nextOfSameDepth:(0,ae.createLeaf)(["./steps","./index"],((e,t)=>{let n=e[t].depth;for(let r of e.slice(t+1)){if(r.depth===n)return r;if(r.depth<n)return}})),application:{submoduleCount:e=>e.trace.application.submoduleCount}}),ye=require("bn.js");var ge=n.n(ye);d()("debugger:evm:selectors");const me="00".repeat(f.Evm.Utils.WORD_SIZE);function be({address:e,binary:t},n,r,i){let a,s=Boolean(t);if(e)({context:a,binary:t}=n[e]);else{if(!s)return null;a=r(t)}return null!=a?{...i[a],binary:t}:{binary:t,isConstructor:s}}function he(e,t=null){let n={trace:(0,ae.createLeaf)([e],(e=>{if(!e)return null;let{gasCost:t,op:n,pc:r}=e;return{gasCost:t,op:n,pc:r}})),programCounter:(0,ae.createLeaf)(["./trace"],(e=>e?e.pc:null)),isCall:(0,ae.createLeaf)(["./trace"],(e=>S(e.op))),isShortCall:(0,ae.createLeaf)(["./trace"],(e=>{return t=e.op,["DELEGATECALL","STATICCALL"].includes(t);var t})),isDelegateCallBroad:(0,ae.createLeaf)(["./trace"],(e=>{return t=e.op,["DELEGATECALL","CALLCODE"].includes(t);var t})),isDelegateCallStrict:(0,ae.createLeaf)(["./trace"],(e=>{return t=e.op,["DELEGATECALL"].includes(t);var t})),isStaticCall:(0,ae.createLeaf)(["./trace"],(e=>{return t=e.op,["STATICCALL"].includes(t);var t})),isCreate:(0,ae.createLeaf)(["./trace"],(e=>I(e.op))),isSelfDestruct:(0,ae.createLeaf)(["./trace"],(e=>A(e.op))),isCreate2:(0,ae.createLeaf)(["./trace"],(e=>"CREATE2"===e.op)),isStore:(0,ae.createLeaf)(["./trace"],(e=>"SSTORE"===e.op)),isLoad:(0,ae.createLeaf)(["./trace"],(e=>"SLOAD"===e.op)),touchesStorage:(0,ae.createLeaf)(["./isStore","isLoad"],((e,t)=>e||t)),isPop:(0,ae.createLeaf)(["./trace"],(e=>"POP"===e.op)),isLog:(0,ae.createLeaf)(["./topicCount"],(e=>null!==e)),topicCount:(0,ae.createLeaf)(["./trace"],(e=>{if(!e.op)return null;const t=e.op.match(/LOG(\d+)/);return t?Number(t[1]):null}))};var r;return t&&("string"==typeof(r=t)&&(r.startsWith("./")||r.startsWith("../"))&&(t=`../${t}`),Object.assign(n,{isJump:(0,ae.createLeaf)(["./trace",t],((e,{stack:t})=>"JUMP"===e.op||"JUMPI"===e.op&&t[t.length-2]!==me)),valueStored:(0,ae.createLeaf)(["./isStore",t],((e,{stack:t})=>e?t[t.length-2]:null)),callAddress:(0,ae.createLeaf)(["./isCall",t],((e,{stack:t})=>{if(!e)return null;let n=t[t.length-2];return f.Evm.Utils.toAddress(n)})),createBinary:(0,ae.createLeaf)(["./isCreate",t],((e,{stack:t,memory:n})=>{if(!e)return null;const r=2*parseInt(t[t.length-2],16),i=2*parseInt(t[t.length-3],16);return"0x"+n.join("").substring(r,r+i).padEnd(i,"00")})),callData:(0,ae.createLeaf)(["./isCall","./isShortCall","./isCreate",t],((e,t,n,{stack:r,memory:i})=>{if(!e)return n?"0x":null;let a=t?1:0;const s=2*parseInt(r[r.length-4+a],16),o=2*parseInt(r[r.length-5+a],16);return"0x"+i.join("").substring(s,s+o).padEnd(o,"00")})),callValue:(0,ae.createLeaf)(["./isCall","./isDelegateCallStrict","./isStaticCall",t],((e,t,n,{stack:r})=>{if(!e||t)return null;if(n)return new(ge())(0);let i=r[r.length-3];return f.Conversion.toBN(i)})),createValue:(0,ae.createLeaf)(["./isCreate",t],((e,{stack:t})=>{if(!e)return null;let n=t[t.length-1];return f.Conversion.toBN(n)})),storageAffected:(0,ae.createLeaf)(["./touchesStorage",t],((e,{stack:t})=>e?t[t.length-1]:null)),salt:(0,ae.createLeaf)(["./isCreate2",t],((e,{stack:t})=>e?"0x"+t[t.length-4]:null)),callContext:(0,ae.createLeaf)(["./callAddress","./createBinary","/current/codex/instances","/info/binaries/search","/info/contexts"],((e,t,n,r,i)=>be({address:e,binary:t},n,r,i))),logData:(0,ae.createLeaf)(["./isLog",t],((e,{stack:t,memory:n})=>{if(!e)return null;const r=2*parseInt(t[t.length-1],16),i=2*parseInt(t[t.length-2],16);return"0x"+n.join("").substring(r,r+i).padEnd(i,"00")})),logTopics:(0,ae.createLeaf)(["./isLog","./topicCount",t],((e,t,{stack:n})=>e?n.slice(-2-t,-2).reverse().map((e=>"0x"+e)):null))})),n}const ve=(0,ae.createSelectorTree)({state:e=>e.evm,application:{storageLookup:(0,ae.createLeaf)(["/state"],(e=>e.application.storageLookup)),storageLookupSupported:(0,ae.createLeaf)(["/state"],(e=>e.application.storageLookupSupported))},info:{contexts:(0,ae.createLeaf)(["/state"],(e=>e.info.contexts.byContext)),binaries:{search:(0,ae.createLeaf)(["/info/contexts"],(e=>t=>(f.Contexts.Utils.findContext(e,t)||{context:null}).context))}},transaction:{globals:{tx:(0,ae.createLeaf)(["/state"],(e=>e.transaction.globals.tx)),block:(0,ae.createLeaf)(["/state"],(e=>e.transaction.globals.block))},blockHash:(0,ae.createLeaf)(["/state"],(e=>e.transaction.txIdentification.blockHash)),txIndex:(0,ae.createLeaf)(["/state"],(e=>e.transaction.txIdentification.txIndex)),status:(0,ae.createLeaf)(["/state"],(e=>e.transaction.status)),initialCall:(0,ae.createLeaf)(["/state"],(e=>e.transaction.initialCall)),startingContext:(0,ae.createLeaf)(["/current/callstack","/current/codex/instances","/info/binaries/search","/info/contexts"],((e,t,n,r)=>e.length>0?be(e[0],t,n,r):null)),affectedInstances:(0,ae.createLeaf)(["/state"],(e=>e.transaction.affectedInstances.byAddress))},current:{callstack:e=>e.evm.proc.callstack,call:(0,ae.createLeaf)(["./callstack"],(e=>e.length?e[e.length-1]:{})),context:(0,ae.createLeaf)(["./call","./codex/instances","/info/binaries/search","/info/contexts"],be),isIR:(0,ae.createLeaf)(["./context"],(e=>!!e.settings&&Boolean(e.settings.viaIR))),state:Object.assign({},...["depth","error","gas","memory","stack"].map((e=>({[e]:(0,ae.createLeaf)([fe.step],(t=>t[e]))})))),step:{...he(fe.step,"./state"),createdAddress:(0,ae.createLeaf)(["./isCreate","/nextOfSameDepth/state/stack","./isCreate2","./create2Address"],((e,t,n,r)=>{if(!e)return null;let i=t?f.Evm.Utils.toAddress(t[t.length-1]):f.Evm.Utils.ZERO_ADDRESS;return i===f.Evm.Utils.ZERO_ADDRESS&&n?r:i})),create2Address:(0,ae.createLeaf)(["./isCreate2","./createBinary","../call","../state/stack"],((e,t,{storageAddress:n},r)=>e?f.Evm.Utils.toAddress("0x"+L({type:"bytes",value:"0xff"+n.slice(2)+r[r.length-4]+L({type:"bytes",value:t}).slice(2)}).slice(2+2*(f.Evm.Utils.WORD_SIZE-f.Evm.Utils.ADDRESS_SIZE))):null)),isInstantCallOrCreate:(0,ae.createLeaf)(["./isCall","./isCreate","./isContextChange"],((e,t,n)=>(e||t)&&!n)),isContextChange:(0,ae.createLeaf)(["/current/state/depth","/next/state/depth"],((e,t)=>e!==t)),isNormalHalting:(0,ae.createLeaf)(["./isHalting","./returnStatus"],((e,t)=>e&&t)),isHalting:(0,ae.createLeaf)(["/current/state/depth","/next/state/depth",fe.stepsRemaining],((e,t,n)=>t<e||0===n)),isExceptionalHalting:(0,ae.createLeaf)(["./isHalting","./returnStatus"],((e,t)=>e&&!t)),returnStatus:(0,ae.createLeaf)(["./isHalting","./isInstantCallOrCreate","/next/state",fe.stepsRemaining,"/transaction/status"],((e,t,{stack:n},r,i)=>e||t?r<=1?i:n[n.length-1]!==me:null)),returnValue:(0,ae.createLeaf)(["./trace","./isExceptionalHalting","../state"],((e,t,{stack:n,memory:r})=>{if("RETURN"!==e.op&&"REVERT"!==e.op)return"0x";if(t&&"REVERT"!==e.op)return"0x";const i=2*parseInt(n[n.length-1],16),a=2*parseInt(n[n.length-2],16);return"0x"+r.join("").substring(i,i+a).padEnd(a,"00")})),valueLoaded:(0,ae.createLeaf)(["./isLoad","/next/state"],((e,{stack:t})=>e?t[t.length-1]:null)),beneficiary:(0,ae.createLeaf)(["./isSelfDestruct","../state","../call"],((e,{stack:t},{storageAddress:n})=>{if(!e)return null;const r=f.Evm.Utils.toAddress(t[t.length-1]);return r!==n?r:null}))},codex:{_:(0,ae.createLeaf)(["/state"],(e=>e.proc.codex)),storage:(0,ae.createLeaf)(["./_","../call"],((e,{storageAddress:t})=>e[e.length-1].accounts[t].storage)),instances:(0,ae.createLeaf)(["./_"],(e=>Object.assign({},...Object.entries(e[e.length-1].accounts).map((([e,{code:t,context:n}])=>({[e]:{address:e,binary:t,context:n}}))))))}},next:{state:Object.assign({},...["depth","error","gas","memory","stack","storage"].map((e=>({[e]:(0,ae.createLeaf)([fe.next],(t=>t[e]))})))),step:he(fe.next,"./state")},nextOfSameDepth:{state:Object.assign({},...["depth","error","gas","memory","stack","storage"].map((e=>({[e]:(0,ae.createLeaf)([fe.nextOfSameDepth],(t=>t?t[e]:null))}))))}}),Le=require("@truffle/source-map-utils");var xe=n.n(Le);const Ce=d()("debugger:sourcemapping:selectors");function Se(e,t){Ce("context: %O",e),Ce("data: %O",t);const n=t.slice(0,2+2*f.Evm.Utils.SELECTOR_SIZE).padEnd(2+2*f.Evm.Utils.SELECTOR_SIZE,"00"),r=(e.abi||[]).some((e=>"fallback"===e.type||"receive"===e.type));return"Solidity"===e.primaryLanguage&&void 0!==e.compiler&&"solc"===e.compiler.name&&de().satisfies(e.compiler.version,">=0.5.1",{includePrerelease:!0})&&!e.isConstructor&&(!r||(e.abi||[]).some((e=>"function"===e.type&&f.AbiData.Utils.abiSelector(e)===n)))}function Ie(e){return{instruction:(0,ae.createLeaf)(["/current/instructionAtProgramCounter",e.programCounter],((e,t)=>e[t]||{})),modifierDepth:(0,ae.createLeaf)(["./instruction"],(e=>e.modifierDepth)),source:(0,ae.createLeaf)(["/current/sources","./instruction"],((e,{file:t})=>e&&e[t]||{})),findOverlappingRange:(0,ae.createLeaf)(["./source","/current/overlapFunctions"],(({index:e},t)=>(t||{})[e])),sourceRange:(0,ae.createLeaf)(["./instruction"],xe().getSourceRange),pointerAndNode:(0,ae.createLeaf)(["./findOverlappingRange","./sourceRange"],((e,t)=>e?xe().findRange(e,t.start,t.length):null)),pointer:(0,ae.createLeaf)(["./pointerAndNode"],(e=>e?e.pointer:null)),node:(0,ae.createLeaf)(["./source","./pointerAndNode"],(({ast:e},t)=>t?t.node:e)),contractNode:(0,ae.createLeaf)(["./source","./pointer"],(({ast:e},t)=>t?oe().get(e,t.replace(/\/nodes\/\d+$/,"")):e))}}let Ae=(0,ae.createSelectorTree)({state:e=>e.sourcemapping,info:{sources:(0,ae.createLeaf)(["/state"],(e=>e.info.sources))},transaction:{bottomStackframeRequiresPhantomFrame:(0,ae.createLeaf)([ve.transaction.startingContext,ve.current.callstack],((e,t)=>Se(e,t[0].data)))},current:{sourceIds:(0,ae.createLeaf)(["/info/sources",ve.current.context],((e,t)=>{if(!t)return Ce("no context"),null;const{compilationId:n,context:r}=t;Ce("compilationId: %o",n);let i=[],a=[];return n&&e.byCompilationId[n]&&(i=e.byCompilationId[n].byIndex),e.byContext[r]&&(a=e.byContext[r].byIndex),Object.assign([],i,a)})),sources:(0,ae.createLeaf)(["/views/sources","/current/sourceIds"],((e,t)=>t?t.map((t=>e[t])):null)),sourceMap:(0,ae.createLeaf)([ve.current.context],(e=>e?e.sourceMap:null)),humanReadableSourceMap:(0,ae.createLeaf)(["./sourceMap"],(e=>e?xe().getHumanReadableSourceMap(e):null)),functionDepthStack:e=>e.sourcemapping.proc.functionDepthStack,nextFrameIsPhantom:e=>e.sourcemapping.proc.nextFrameIsPhantom,functionDepth:(0,ae.createLeaf)(["./functionDepthStack"],(e=>e[e.length-1])),callRequiresPhantomFrame:(0,ae.createLeaf)([ve.current.step.callContext,ve.current.step.callData],Se),instructions:(0,ae.createLeaf)(["./sources",ve.current.context,"./humanReadableSourceMap"],((e,t,n)=>t?(Ce("sources before processing: %O",e),xe().getProcessedInstructionsForBinary((e||[]).map((e=>e?e.source:void 0)),t.binary,n)):[])),instructionAtProgramCounter:(0,ae.createLeaf)(["./instructions"],(e=>Object.assign({},...e.map((e=>({[e.pc]:e})))))),...Ie(ve.current.step),isSourceRangeFinalRaw:(0,ae.createLeaf)(["./instructionAtProgramCounter",ve.current.step.programCounter,ve.next.step.programCounter,ve.current.step.isContextChange],((e,t,n,r)=>!(!r&&e[n])||(t=e[t],n=e[n],t.start!=n.start||t.length!=n.length||t.file!=n.file))),isSourceRangeFinal:(0,ae.createLeaf)(["./isSourceRangeFinalRaw","./source","/next/source",ve.current.step.isContextChange],((e,t,n,r)=>r||e&&(t.internal||!n.internal))),functionsByProgramCounter:(0,ae.createLeaf)(["./instructions","./sources","./overlapFunctions",ve.current.context],((e,t,n,{compilationId:r})=>xe().getFunctionsByProgramCounter(e,t.map((({ast:e})=>e)),n,r))),isMultiline:(0,ae.createLeaf)(["./sourceRange"],(({lines:e})=>e.start.line!=e.end.line)),onYulFunctionDefinitionWhileEntering:(0,ae.createLeaf)(["./node","./pointer","../next/pointer"],((e,t,n)=>e&&"YulFunctionDefinition"===e.nodeType&&null!==n&&(n.startsWith(`${t}/body/`)||n.startsWith(`${t}/returnVariables`)))),willJump:(0,ae.createLeaf)([ve.current.step.isJump],(e=>e)),jumpDirection:(0,ae.createLeaf)(["./instruction"],((e={})=>e.jump||"-")),willCall:(0,ae.createLeaf)([ve.current.step.isCall,ve.current.step.isCreate,ve.current.step.isInstantCallOrCreate],((e,t,n)=>(e||t)&&!n)),willReturn:(0,ae.createLeaf)([ve.current.step.isHalting],(e=>e)),nextUserStep:(0,ae.createLeaf)(["./instructionAtProgramCounter","/current/sources",fe.steps,fe.index],((e,t,n,r)=>n.slice(r+1).find((({pc:n})=>e[n]&&-1!==e[n].file&&!(t[e[n].file]&&t[e[n].file].internal))))),overlapFunctions:(0,ae.createLeaf)(["/views/overlapFunctions","/current/sourceIds"],((e,t)=>t?t.map((t=>e[t])):null))},next:Ie(ve.next.step),views:{sources:(0,ae.createLeaf)(["/info/sources"],(e=>e.byId)),overlapFunctions:(0,ae.createLeaf)(["/views/sources"],(e=>Object.assign({},...Object.entries(e).map((([e,{ast:t}])=>({[e]:xe().makeOverlapFunction(t)}))))))}});const Ee=Ae,Te=require("lodash/zipWith");var Re=n.n(Te);const Oe=d()("debugger:stacktrace:selectors"),we=e=>e;function _e(e,t,n,r){let i=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.combineWithNextInternal&&t<e.length-1&&"internal"===e[t+1].type&&!e[t+1].sourceIsInternal){const r={...e[t+1],calledFromLocation:n.calledFromLocation};i.push(r),t++}else i.push(n)}Oe("callstack: %O",i);let a=i.map((e=>e.calledFromLocation));a.shift(),a.push(t),Oe("locations: %O",a);const s=i.map((({functionName:e,contractName:t,address:n,isConstructor:r,type:i})=>({functionName:e,contractName:t,address:n,isConstructor:r,type:i})));Oe("names: %O",s);let o=Re()(a,s,((e,t)=>({...t,location:e})));return null!==n&&(o[o.length-1].status=n),void 0!==r&&(void 0!==r.Error?o[0].message=r.Error:void 0!==r.Panic?o[0].panic=r.Panic:void 0!==r.custom&&(o[0].custom=r.custom)),o}function ke(e){return{location:{source:(0,ae.createLeaf)([e.source],we),sourceRange:(0,ae.createLeaf)([e.sourceRange],we),node:(0,ae.createLeaf)([e.node],we),pointer:(0,ae.createLeaf)([e.pointer],we)},sourceIsInternal:(0,ae.createLeaf)(["./location/source"],(e=>void 0===e.id||e.internal)),sourceIsGenerated:(0,ae.createLeaf)(["./location/source"],(e=>e.internal)),strippedLocation:(0,ae.createLeaf)(["./location/source","./location/sourceRange","./location/node"],(({id:e,sourcePath:t,internal:n},r,i)=>({source:{id:e,sourcePath:t,internal:n},sourceRange:r,node:i?{id:i.id}:null}))),contractNode:(0,ae.createLeaf)([e.contractNode],we)}}let De=(0,ae.createSelectorTree)({state:e=>e.stacktrace,transaction:{initialCallCombinesWithNextJumpIn:(0,ae.createLeaf)([Ee.transaction.bottomStackframeRequiresPhantomFrame],we)},current:{callstack:{_:(0,ae.createLeaf)(["/state"],(e=>e.proc.callstack)),preupdated:(0,ae.createLeaf)(["./_","/current/returnCounter"],((e,t)=>v(e,t,(e=>"external"===e.type))))},returnCounter:(0,ae.createLeaf)(["/state"],(e=>e.proc.returnCounter)),lastPosition:(0,ae.createLeaf)(["/state"],(e=>e.proc.lastPosition)),innerReturnPosition:(0,ae.createLeaf)(["/state"],(e=>e.proc.innerReturnPosition)),innerReturnStatus:(0,ae.createLeaf)(["/state"],(e=>e.proc.innerReturnStatus)),innerErrorIndex:(0,ae.createLeaf)(["/state"],(e=>e.proc.innerErrorIndex)),...ke(Ee.current),index:(0,ae.createLeaf)([fe.index],we),updateIndex:(0,ae.createLeaf)(["./returnCounter",fe.stepsRemaining,"./returnStatus"],((e,t,n)=>0===e&&t>1&&!n)),willJumpIn:(0,ae.createLeaf)([Ee.current.willJump,Ee.current.jumpDirection],((e,t)=>e&&"i"===t)),willJumpOut:(0,ae.createLeaf)([Ee.current.willJump,Ee.current.jumpDirection],((e,t)=>e&&"o"===t)),willCall:(0,ae.createLeaf)([Ee.current.willCall],we),context:(0,ae.createLeaf)([ve.current.context],we),callContext:(0,ae.createLeaf)([ve.current.step.callContext],we),callCombinesWithNextJumpIn:(0,ae.createLeaf)([Ee.current.callRequiresPhantomFrame],we),willReturn:(0,ae.createLeaf)([Ee.current.willReturn],we),returnStatus:(0,ae.createLeaf)([ve.current.step.returnStatus],we),address:(0,ae.createLeaf)([ve.current.call],(e=>e.storageAddress)),callAddress:(0,ae.createLeaf)([ve.current.step.isCall,ve.current.step.isCreate,ve.current.step.callAddress,ve.current.step.createdAddress],((e,t,n,r)=>e?n:t?r!==f.Evm.Utils.ZERO_ADDRESS?r:void 0:null)),revertString:(0,ae.createLeaf)([ve.current.step.returnValue],(e=>{let t=f.decodeRevert(f.Conversion.toBytes(e));if(1!==t.length||"revert"!==t[0].kind)return 0===t.length?{custom:!0}:void 0;{const e=t[0];switch(e.abi.name){case"Error":const t=e.arguments[0].value.value;return{Error:f.Export.stringValueInfoToStringLossy(t)};case"Panic":return{Panic:e.arguments[0].value.value.asBN};default:return}}})),positionWillChange:(0,ae.createLeaf)(["/next/location","/current/location","./lastPosition"],((e,t,n)=>{let r=void 0===t.source.id||t.source.internal?n:t;return Boolean(r)&&Boolean(e.source)&&void 0!==e.source.id&&!e.source.internal&&(e.source.id!==r.source.id||e.sourceRange.start!==r.sourceRange.start||e.sourceRange.length!==r.sourceRange.length)})),finalReport:(0,ae.createLeaf)(["./callstack","./innerReturnPosition","./innerReturnStatus","./revertString"],_e),report:(0,ae.createLeaf)(["./callstack/preupdated","./returnCounter","./lastPosition","/current/strippedLocation"],((e,t,n,r)=>_e(e,r||n,null,void 0)))},next:{...ke(Ee.next)}});const Ne=De,Pe=d()("debugger:data:selectors"),Ue=e=>e;function je(e,t,n,r=null,i=null){for(;e&&!t.includes(e.nodeType);)if(void 0!==e.id)e=n[n[e.id].parentId].definition;else{if(null===r||null===i||""===r)return null;r=r.replace(/\/[^/]*$/,""),e=oe().get(i,r)}return e}function Fe(e,t){let n;switch(e.nodeType){case"ModifierInvocation":n=e.modifierName.referencedDeclaration;break;case"InheritanceSpecifier":n=e.baseName.referencedDeclaration;break;default:Pe("bad invocation node")}let r=t[n].definition;switch(r.nodeType){case"ModifierDefinition":return r;case"ContractDefinition":return r.nodes.find((e=>"FunctionDefinition"===e.nodeType&&"constructor"===f.Ast.Utils.functionKind(e)));default:return}}function Me(e){let{context:t,contractName:n,binary:r,contractId:i,contractKind:a,isConstructor:s,abi:o,payable:c,compiler:l,compilationId:u}=e;return{context:t,contractName:n,binary:r,contractId:i,contractKind:a,isConstructor:s,abi:f.AbiData.Utils.computeSelectors(o),fallbackAbi:{fallback:(o||[]).find((e=>"fallback"===e.type))||null,receive:(o||[]).find((e=>"receive"===e.type))||null},payable:c,compiler:l,compilationId:u}}const Be={id:-1,src:"0:0:-1",name:"now",nodeType:"VariableDeclaration",typeDescriptions:{typeIdentifier:"t_uint256",typeString:"uint256"}},Ve={id:-1,src:"0:0:-1",name:"msg",nodeType:"VariableDeclaration",typeDescriptions:{typeIdentifier:"t_magic_message",typeString:"msg"}},Ge={id:-1,src:"0:0:-1",name:"tx",nodeType:"VariableDeclaration",typeDescriptions:{typeIdentifier:"t_magic_transaction",typeString:"tx"}},He={id:-1,src:"0:0:-1",name:"block",nodeType:"VariableDeclaration",typeDescriptions:{typeIdentifier:"t_magic_block",typeString:"block"}},We=(0,ae.createSelectorTree)({state:e=>e.data,views:{atLastInstructionForSourceRange:(0,ae.createLeaf)([Ee.current.isSourceRangeFinal],(e=>e)),scopes:{_:(0,ae.createLeaf)(["/info/scopes"],(e=>Object.assign({},...Object.entries(e).map((([e,{byAstRef:t}])=>({[e]:t})))))),inlined:(0,ae.createLeaf)(["./_",Ee.views.sources],((e,t)=>Object.assign({},...Object.entries(e).map((([e,n])=>({[e]:Object.assign({},...Object.entries(n).map((([e,n])=>({[e]:{...n,definition:oe().get(t[n.sourceId].ast,n.pointer)}}))))}))))))},userDefinedTypesByCompilation:(0,ae.createLeaf)(["/info/userDefinedTypes","./referenceDeclarations","./scopes/inlined",Ee.views.sources],((e,t,n,r)=>{let i={};for(const{sourceId:a,id:s}of e){const e=n[a][s].definition,{compilationId:o,compiler:c,internal:l}=r[a];if(l)continue;const u=f.Ast.Import.definitionToStoredType(e,o,c,t[o]);i[o]||(i[o]={compiler:c,types:{}}),i[o].types[u.id]=u}return i})),userDefinedTypes:(0,ae.createLeaf)(["./userDefinedTypesByCompilation"],f.Format.Types.forgetCompilations),contractAllocationInfo:(0,ae.createLeaf)(["/info/userDefinedTypes","/views/scopes/inlined","/info/contracts",Ee.views.sources,ve.info.contexts],((e,t,n,r,i)=>Object.values(e).filter((({sourceId:e,id:n})=>!r[e].internal&&"ContractDefinition"===t[e][n].definition.nodeType)).map((({sourceId:e,id:a})=>{Pe("id: %O",a);const s=r[e].compilationId;Pe("compilationId: %O",s);const o=n[s].byAstId[a],c=i[o.deployedContext],l=i[o.constructorContext],u=(c||{}).immutableReferences;return{contractNode:t[e][a].definition,compilationId:s,immutableReferences:u,compiler:r[e].compiler,abi:o.abi,deployedContext:c,constructorContext:l}})))),referenceDeclarations:(0,ae.createLeaf)(["./scopes/inlined","/info/userDefinedTypes","/info/taggedOutputs",Ee.views.sources],((e,t,n,r)=>le()({},...t.concat(n).map((({id:t,sourceId:n})=>{const i=r[n];return i.internal?{}:{[i.compilationId]:{[t]:e[n][t].definition}}}))))),mappingKeys:(0,ae.createLeaf)(["/proc/mappedPaths","/current/address"],((e,t)=>[].concat(...Object.values((e.byAddress[t]||{byType:{}}).byType).map((({bySlotAddress:e})=>Object.values(e)))).filter((e=>void 0!==e.key)))),blockNumber:(0,ae.createLeaf)([ve.transaction.globals.block],(e=>e.number.toString())),blockHash:(0,ae.createLeaf)([ve.transaction.blockHash],Ue),txIndex:(0,ae.createLeaf)([ve.transaction.txIndex],Ue),instances:(0,ae.createLeaf)([ve.current.codex.instances],(e=>Object.assign({},...Object.entries(e).map((([e,{binary:t}])=>({[e]:f.Conversion.toBytes(t)})))))),contexts:(0,ae.createLeaf)([ve.info.contexts],(e=>Object.assign({},...Object.values(e).map((e=>({[e.context]:Me(e)}))))))},info:{scopes:(0,ae.createLeaf)(["/state"],(e=>e.info.scopes.bySourceId)),contracts:(0,ae.createLeaf)(["/state"],(e=>e.info.contracts.byCompilationId)),allocations:{storage:(0,ae.createLeaf)(["/state"],(e=>e.info.allocations.storage)),state:(0,ae.createLeaf)(["/state"],(e=>e.info.allocations.state)),memory:(0,ae.createLeaf)(["/state"],(e=>e.info.allocations.memory)),abi:(0,ae.createLeaf)(["/state"],(e=>e.info.allocations.abi)),calldata:(0,ae.createLeaf)(["/state"],(e=>e.info.allocations.calldata)),returndata:(0,ae.createLeaf)(["/state"],(e=>e.info.allocations.returndata)),event:(0,ae.createLeaf)(["/state"],(e=>e.info.allocations.event))},userDefinedTypes:(0,ae.createLeaf)(["/state"],(e=>e.info.userDefinedTypes)),taggedOutputs:(0,ae.createLeaf)(["/state"],(e=>e.info.taggedOutputs))},proc:{assignments:(0,ae.createLeaf)(["/state"],(e=>e.proc.assignments.byId)),mappedPaths:(0,ae.createLeaf)(["/state"],(e=>e.proc.mappedPaths))},current:{state:{stack:(0,ae.createLeaf)([ve.current.state.stack],(e=>(e||[]).map((e=>f.Conversion.toBytes(e))))),memory:(0,ae.createLeaf)([ve.current.state.memory],(e=>f.Conversion.toBytes(e.join("")))),code:(0,ae.createLeaf)([ve.current.context],(({binary:e})=>f.Conversion.toBytes(e))),calldata:(0,ae.createLeaf)([ve.current.call],(({data:e})=>f.Conversion.toBytes(e))),eventdata:(0,ae.createLeaf)([ve.current.step.logData],(e=>null!==e?f.Conversion.toBytes(e):void 0)),eventtopics:(0,ae.createLeaf)([ve.current.step.logTopics],(e=>null!==e?e.map((e=>f.Conversion.toBytes(e))):void 0)),storage:(0,ae.createLeaf)([ve.current.codex.storage],(e=>Object.assign({},...Object.entries(e).map((([e,t])=>({[`0x${e}`]:f.Conversion.toBytes(t)})))))),specials:(0,ae.createLeaf)(["/current/address",ve.current.call,ve.transaction.globals],((e,{sender:t,value:n},{tx:r,block:i})=>({this:f.Conversion.toBytes(e),sender:f.Conversion.toBytes(t),value:f.Conversion.toBytes(n),...Object.assign({},...Object.entries(r).map((([e,t])=>({[e]:f.Conversion.toBytes(t)})))),...Object.assign({},...Object.entries(i).map((([e,t])=>({[e]:f.Conversion.toBytes(t)}))))})))},compilationId:(0,ae.createLeaf)([ve.current.context],(e=>e?.compilationId)),sourceIndex:(0,ae.createLeaf)([Ee.current.source],(({index:e})=>e)),language:(0,ae.createLeaf)([Ee.current.source],(({language:e})=>e)),internalSourceFor:(0,ae.createLeaf)([Ee.current.source],(({internalFor:e})=>e||null)),root:(0,ae.createLeaf)([Ee.current.source],(({ast:e})=>e)),scopes:{_:(0,ae.createLeaf)(["./raw","./inlined/raw"],((e,t)=>e&&t?Object.assign({},...Object.entries(e).map((([n,r])=>{let i=t[n].definition;if("ContractDefinition"===i.nodeType){Pe("contract id %d",n);let a={...r};const s=i.linearizedBaseContracts.slice().reverse();return s.pop(),a.variables=[].concat(...s.map((t=>e[t].variables||[]))).filter((e=>"private"!==t[e.astRef].definition.visibility)).concat(e[n].variables||[]).filter((e=>{Pe("variable %O",e);const n=t[e.astRef].definition;return!(n.constant||"constant"===n.mutability)||f.Ast.Utils.isSimpleConstant(n.value)})),{[n]:a}}if("SourceUnit"===i.nodeType){let e={...r};return e.variables=Object.values(i.exportedSymbols).map((e=>e[0])).filter((e=>{const n=t[e].definition;return"VariableDeclaration"===n.nodeType&&(n.constant||"constant"===n.mutability)&&f.Ast.Utils.isSimpleConstant(n.value)})).map((e=>({astRef:e,name:t[e].definition.name,sourceId:t[e].sourceId}))),{[n]:e}}return{[n]:r}}))):null)),raw:(0,ae.createLeaf)(["/views/scopes",Ee.current.sourceIds],((e,t)=>t?Object.assign({},...t.map((t=>e[t]))):null)),inlined:{_:(0,ae.createLeaf)(["./raw","../_"],((e,t)=>e?Object.assign({},...Object.entries(e).map((([e,n])=>({[e]:{...n,variables:t[e].variables}})))):null)),raw:(0,ae.createLeaf)(["/views/scopes/inlined",Ee.current.sourceIds],((e,t)=>t?Object.assign({},...t.map((t=>e[t]))):null))}},referenceDeclarations:(0,ae.createLeaf)(["/views/referenceDeclarations","./compilationId"],((e,t)=>e[t])),allocations:{state:(0,ae.createLeaf)(["/info/allocations/state","../compilationId",ve.current.context],((e,t,{isConstructor:n})=>{Pe("compilationId: %s",t),Pe("allAllocations: %o",e);const r=t?e[t]:{};let i=Object.assign({},...Object.entries(r).map((([e,t])=>({[e]:{members:t.members.map((e=>({...e})))}}))));if(n)for(const e in i){const t=i[e];let n=4*f.Evm.Utils.WORD_SIZE;for(const e of t.members)"code"!==e.pointer.location&&"nowhere"!==e.pointer.location||(e.pointer={location:"memory",start:n,length:f.Evm.Utils.WORD_SIZE},n+=f.Evm.Utils.WORD_SIZE)}return Object.assign({},...Object.entries(i).map((([e,t])=>({[e]:{members:Object.assign({},...t.members.map((e=>({[e.definition.id]:e}))))}}))))}))},compiler:(0,ae.createLeaf)([ve.current.context],(e=>e?.compiler)),bareLetsInYulAreHit:(0,ae.createLeaf)(["./compiler"],(e=>void 0!==e&&"solc"===e.name&&de().satisfies(e.version,">=0.6.8",{includePrerelease:!0}))),node:(0,ae.createLeaf)([Ee.current.node],Ue),pointer:(0,ae.createLeaf)([Ee.current.pointer],Ue),astRef:(0,ae.createLeaf)([Ee.current.node,Ee.current.pointer,"./sourceIndex"],((e,t,n)=>e?void 0!==e.id?e.id:h(n,t):null)),scope:(0,ae.createLeaf)(["./node"],Ue),contract:(0,ae.createLeaf)(["./node","./scopes/inlined","./pointer","./root"],((e,t,n,r)=>je(e,["ContractDefinition","SourceUnit"],t,n,r))),contractForBytecode:(0,ae.createLeaf)([ve.current.context,"./scopes/inlined"],(({contractId:e},t)=>(t[e]||{definition:null}).definition)),fallbackOutputForContext:(0,ae.createLeaf)(["./contractForBytecode"],(e=>{if(!e)return null;const t=e.nodes.find((e=>"FunctionDefinition"===e.nodeType&&"fallback"===f.Ast.Utils.functionKind(e)));return t&&t.returnParameters.parameters[0]||null})),function:(0,ae.createLeaf)(["./node","./scopes/inlined","./pointer","./root"],((e,t,n,r)=>je(e,["FunctionDefinition","ModifierDefinition","ContractDefinition","SourceUnit"],t,n,r))),inModifier:(0,ae.createLeaf)(["./function"],(e=>e&&"ModifierDefinition"===e.nodeType)),inFunctionOrModifier:(0,ae.createLeaf)(["./function"],(e=>e&&("FunctionDefinition"===e.nodeType||"ModifierDefinition"===e.nodeType))),functionDepth:(0,ae.createLeaf)([Ee.current.functionDepth],Ue),modifierDepth:(0,ae.createLeaf)([Ee.current.modifierDepth],Ue),address:(0,ae.createLeaf)([ve.current.call],(e=>e.storageAddress)),functionsByProgramCounter:(0,ae.createLeaf)([Ee.current.functionsByProgramCounter],(e=>e)),internalFunctionsTable:(0,ae.createLeaf)([ve.current.isIR,"./functionsByProgramCounter","./functionsByIndex"],((e,t,n)=>e?n:t)),internalFunctionsTableKind:(0,ae.createLeaf)([ve.current.isIR],(e=>e?"index":"pcpair")),functionsByIndex:(0,ae.createLeaf)([ve.current.context,"./scopes/inlined"],(({compilationId:e,contractId:t},n)=>{if(void 0===t)return;const r=n[t].definition;return r.internalFunctionIDs?Object.assign([{isDesignatedInvalid:!0}],...Object.entries(r.internalFunctionIDs).map((([t,r])=>{t=Number(t);let{definition:i,pointer:a,parentId:s}=n[t],{definition:o,pointer:c}=n[s];return"ContractDefinition"!==o.nodeType&&(o=null,s=null,c=null),{[r]:{isDesignatedInvalid:!1,sourceIndex:Number(i.src.split(":")[2]),compilationId:e,pointer:a,node:i,name:i.name,id:t,mutability:f.Ast.Utils.mutability(i),contractPointer:c,contractNode:o,contractName:o?o.name:null,contractId:s,contractKind:o?o.contractKind:null,contractPayable:o?f.Ast.Utils.isContractPayable(o):null}}}))):void 0})),context:(0,ae.createLeaf)([ve.current.context],Me),fallbackBase:(0,ae.createLeaf)(["./context"],(({abi:e})=>Object.keys(e).length>0?1:0)),errorLocation:(0,ae.createLeaf)([Ne.current.innerReturnPosition,Ne.current.lastPosition],((e,t)=>e||t||{})),errorNode:(0,ae.createLeaf)(["./errorLocation","/views/scopes/inlined"],((e,t)=>{const n=(e.source||{}).id,r=(e.node||{}).id;return void 0!==n&&void 0!==r?t[n][r].definition:null})),errorId:(0,ae.createLeaf)(["./errorNode","./compilationId"],((e,t)=>{if(null!==e)switch(e.nodeType){case"RevertStatement":e=e.errorCall;case"FunctionCall":if("error"!==f.Ast.Utils.functionClass(e.expression))return;const n=e.expression.referencedDeclaration;return f.Contexts.Import.makeTypeId(n,t);default:return}})),eventId:(0,ae.createLeaf)(["./node","./compilationId"],((e,t)=>{if(e)switch(e.nodeType){case"EmitStatement":e=e.eventCall;case"FunctionCall":if("event"!==f.Ast.Utils.functionClass(e.expression))return;const n=e.expression.referencedDeclaration;return f.Contexts.Import.makeTypeId(n,t);default:return}})),aboutToModify:(0,ae.createLeaf)(["./node","./modifierInvocation","./modifierArgumentIndex","/next/node","/next/modifierInvocation",ve.current.step.isContextChange],((e,t,n,r,i,a)=>{if(a||!e||void 0===e.id||!r||void 0===r.id||!t||void 0===t.id||!i||void 0===i.id)return!1;if("SourceUnit"===t.nodeType)return!1;if("FunctionDefinition"===r.nodeType||"ModifierDefinition"===r.nodeType)return!1;if("SourceUnit"!==i.nodeType&&i.id===t.id)return!1;if(void 0===n)return!1;let s=t.arguments[n];for(;"typeConversion"===s.kind;){if(e.id===s.id)return!0;s=s.arguments[0]}return e.id===s.id})),modifierInvocation:(0,ae.createLeaf)(["./node","./scopes/inlined"],((e,t)=>je(e,["ModifierInvocation","InheritanceSpecifier","SourceUnit"],t))),modifierArgumentIndex:(0,ae.createLeaf)(["./scopes","./node","./modifierInvocation"],((e,t,n)=>{if(!n||"SourceUnit"===n.nodeType)return;let r=e[t.id].pointer,i=e[n.id].pointer,a=r.slice(i.length);Pe("difference %s",a);let s=a.match(/^\/arguments\/(\d+)/);return Pe("rawIndex %o",s),null!==s?parseInt(s[1]):void 0})),modifierBeingInvoked:(0,ae.createLeaf)(["./modifierInvocation","./scopes/inlined"],((e,t)=>{if(e&&"SourceUnit"!==e.nodeType)return Fe(e,t)})),onYulFunctionDefinitionWhileEntering:(0,ae.createLeaf)([Ee.current.onYulFunctionDefinitionWhileEntering],Ue),identifiers:{_:(0,ae.createLeaf)(["/current/scopes/inlined","/current/node","/current/pointer","/current/sourceIndex","/current/language"],((e,t,n,r,i)=>{let a={};if(void 0!==t){let i=void 0!==t.id?t.id:h(r,n);for(;null!==i&&e[i]&&(Pe("cur: %o",i),Pe("scopes[cur]: %o",e[i]),a=Object.assign(a,...(e[i].variables||[]).filter((e=>""!==e.name)).filter((e=>null==a[e.name])).map((e=>({[e.name]:{astRef:e.astRef}})))),"YulFunctionDefinition"!==e[i].definition.nodeType);)i=void 0!==e[i].parentId?e[i].parentId:i.replace(/\/[^/]*(\/\d+)?$/,"")}return"Solidity"!==i||t&&(t.nodeType.startsWith("Yul")||"InlineAssembly"===t.nodeType)?a:{msg:{builtin:"msg"},tx:{builtin:"tx"},block:{builtin:"block"},this:{builtin:"this"},now:{builtin:"now"},...a}})),definitions:{_:(0,ae.createLeaf)(["/current/scopes/inlined","../_","./this","/current/compiler"],((e,t,n,r)=>{Pe("identifiers: %O",t);let i=Object.assign({},...Object.entries(t).map((([t,n])=>{if(void 0!==n.astRef){let{definition:r}=e[n.astRef];return{[t]:r}}return{}}))),a={msg:Ve,tx:Ge,block:He};return n&&(a.this=n),function(e){return e&&"solc"===e.name&&de().satisfies(e.version,"~0.7 || >=0.7.0",{includePrerelease:!0})}(r)||(Pe("adding now"),a.now=Be),{...a,...i}})),this:(0,ae.createLeaf)(["/current/contract"],(e=>{return e&&"ContractDefinition"===e.nodeType?(t=e.name,n=e.id,r=e.contractKind,{id:-1,src:"0:0:-1",name:"this",nodeType:"VariableDeclaration",typeDescriptions:{typeIdentifier:"t_contract$_"+t.replace(/\$/g,"$$".repeat(3))+"_$"+n,typeString:r+" "+t}}):null;var t,n,r}))},sections:(0,ae.createLeaf)(["./definitions","./refs","/current/scopes/inlined"],((e,t,n)=>{let r={builtin:[],global:[],contract:[],local:[]};if(!n)return r;for(const[i,a]of Object.entries(t))if(i in e)switch(a.location){case"special":r.builtin.push(i);break;case"stack":r.local.push(i);break;case"storage":case"code":case"nowhere":case"memory":r.contract.push(i);break;case"definition":const t=n[e[i].scope].definition;"SourceUnit"===t.nodeType?r.global.push(i):"ContractDefinition"===t.nodeType&&r.contract.push(i)}return r})),refs:(0,ae.createLeaf)(["/proc/assignments","./_","./definitions","/current/scopes/inlined","/current/compilationId","/current/internalSourceFor","/current/functionDepth","/current/modifierDepth","/current/inModifier"],((e,t,n,r,i,a,s,o,c)=>Object.assign({},...Object.entries(t).map((([t,{astRef:l,builtin:u}])=>{let d;if(Pe("astRef: %o",l),Pe("builtin: %s",u),void 0!==l){if(d=x({astRef:l,compilationId:i,internalFor:a}),d in e||(d=x({astRef:l,compilationId:i,internalFor:a,stackframe:s,modifierDepth:c?o:null})),Pe("id after local: %s",d),!(d in e)){const e=n[t];if(!(Pe("global definition: %o",e),void 0===e.scope||"SourceUnit"!==r[e.scope].definition.nodeType||!0!==e.constant&&"constant"!==e.mutability))return{[t]:{location:"definition",definition:e.value}}}}else d=x({builtin:u});Pe("id: %s",d);let{ref:p}=e[d]||{};return p?{[t]:p}:{}})))))},returnStatus:(0,ae.createLeaf)([ve.current.step.returnStatus],(e=>null===e?void 0:e)),returnAllocation:(0,ae.createLeaf)([ve.current.call,"/current/context","/info/allocations/calldata","./fallbackOutputForContext"],(({data:e},{context:t,isConstructor:n,fallbackAbi:r},{constructorAllocations:i,functionAllocations:a},s)=>{if(n){let e=i[t];return e?e.output:null}{let n=e.slice(0,10);Pe("selector: %s",n),Pe("bySelector: %o",a[t]);let i=(a[t]||{})[n];return i?i.output:"0x"===e&&null!==r.receive||null===r.fallback||!s?null:f.AbiData.Allocate.FallbackOutputAllocation}})),isCall:(0,ae.createLeaf)([ve.current.step.isCall],Ue),isCreate:(0,ae.createLeaf)([ve.current.step.isCreate],Ue),currentCallIsCreate:(0,ae.createLeaf)([ve.current.call],(e=>void 0!==e.binary)),callContext:(0,ae.createLeaf)([ve.current.step.callContext],Me),isPop:(0,ae.createLeaf)([ve.current.step.isPop],Ue)},next:{state:{stack:(0,ae.createLeaf)([ve.next.state.stack],(e=>(e||[]).map((e=>f.Conversion.toBytes(e))))),returndata:(0,ae.createLeaf)([ve.current.step.returnValue],(e=>f.Conversion.toBytes(e))),calldata:(0,ae.createLeaf)([ve.current.step.isCall,ve.current.step.isCreate,ve.current.step.callData,ve.current.step.createBinary],((e,t,n,r)=>e||t?f.Conversion.toBytes(e?n:r):null))},node:(0,ae.createLeaf)([Ee.next.node],Ue),pointer:(0,ae.createLeaf)([Ee.next.pointer],Ue),modifierInvocation:(0,ae.createLeaf)(["./node","/current/scopes/inlined",ve.current.step.isContextChange],((e,t,n)=>{if(!n)return je(e,["ModifierInvocation","InheritanceSpecifier","SourceUnit"],t)})),modifierBeingInvoked:(0,ae.createLeaf)(["./modifierInvocation","/current/scopes/inlined",ve.current.step.isContextChange],((e,t,n)=>{if(!n&&e&&"SourceUnit"!==e.nodeType)return Fe(e,t)}))},nextUserStep:{state:{stack:(0,ae.createLeaf)([Ee.current.nextUserStep],(e=>((e||{}).stack||[]).map((e=>f.Conversion.toBytes(e)))))}},nextOfSameDepth:{state:{stack:(0,ae.createLeaf)([fe.nextOfSameDepth],(e=>e?(e.stack||[]).map((e=>f.Conversion.toBytes(e))):null))}}}),Ke=We,$e=(d()("debugger:txlog:selectors"),e=>e);function Ye(e){return{source:(0,ae.createLeaf)([e.source],$e),astNode:(0,ae.createLeaf)([e.node],$e),inInternalSourceOrYul:(0,ae.createLeaf)(["./source","./astNode"],((e,t)=>!t||e.internal||t.nodeType.startsWith("Yul")||"ContractDefinition"===t.nodeType))}}let qe=(0,ae.createSelectorTree)({state:e=>e.txlog,proc:{transactionLog:(0,ae.createLeaf)(["/state"],(e=>e.proc.transactionLog.byPointer))},transaction:{origin:(0,ae.createLeaf)([ve.transaction.globals.tx],(e=>e.origin)),initialCall:(0,ae.createLeaf)(["/state"],(e=>e.transaction.initialCall)),absorbFirstInternalCall:(0,ae.createLeaf)([Ee.transaction.bottomStackframeRequiresPhantomFrame],$e)},current:{...Ye(Ee.current),state:(0,ae.createLeaf)([ve.current.state],$e),pointer:(0,ae.createLeaf)(["/state"],(e=>e.proc.currentNodePointer)),pointerStack:(0,ae.createLeaf)(["/state"],(e=>e.proc.pointerStack)),node:(0,ae.createLeaf)(["./pointer","/proc/transactionLog"],((e,t)=>t[e])),step:(0,ae.createLeaf)([fe.index,fe.steps],((e,t)=>0===t.length?-1:e)),waitingForFunctionDefinition:(0,ae.createLeaf)(["./node"],(e=>("callinternal"===e.type||"callexternal"===e.type)&&e.waitingForFunctionDefinition)),waitingForInternalCallToAbsorb:(0,ae.createLeaf)(["./node"],(e=>"callexternal"===e.type&&e.absorbNextInternalCall)),nextActionPointer:(0,ae.createLeaf)(["./pointer","./node"],((e,t)=>`${e}/actions/${t.actions.length}`)),internalReturnPointer:(0,ae.createLeaf)(["./pointer","./node"],((e,t)=>"callinternal"===t.type?e.replace(/\/actions\/\d+$/,""):e)),externalReturnPointer:(0,ae.createLeaf)(["./pointerStack"],(e=>e[e.length-1].replace(/\/actions\/\d+$/,""))),context:(0,ae.createLeaf)([Ke.current.context],$e),call:(0,ae.createLeaf)([ve.current.call],$e),contract:(0,ae.createLeaf)([Ke.current.contract],$e),isSourceRangeFinal:(0,ae.createLeaf)([Ee.current.isSourceRangeFinal],$e),onFunctionDefinition:(0,ae.createLeaf)(["./astNode","./isSourceRangeFinal","/next/inInternalSourceOrYul",fe.stepsRemaining],((e,t,n,r)=>(t||r<=2)&&e&&"FunctionDefinition"===e.nodeType&&!n)),currentFunctionIsAsExpected:(0,ae.createLeaf)(["./node",Ke.current.function,Ke.current.contract],((e,t,n)=>t&&("ContractDefinition"===t.nodeType||"ModifierDefinition"===t.nodeType||"FunctionDefinition"===t.nodeType&&t.name===e.functionName&&("callexternal"===e.kind||n&&n.name===e.contractName)))),compilationId:(0,ae.createLeaf)([Ke.current.compilationId],$e),isJump:(0,ae.createLeaf)([ve.current.step.isJump],$e),jumpDirection:(0,ae.createLeaf)([Ee.current.jumpDirection],$e),isLog:(0,ae.createLeaf)([ve.current.step.isLog],$e),isStore:(0,ae.createLeaf)([ve.current.step.isStore],$e),rawStorageSlot:(0,ae.createLeaf)([ve.current.step.isStore,ve.current.step.storageAffected],((e,t)=>e?"0x"+t:null)),rawStorageValue:(0,ae.createLeaf)([ve.current.step.valueStored],(e=>null!==e?"0x"+e:null)),rawEventInfo:{topics:(0,ae.createLeaf)([ve.current.step.logTopics],$e),data:(0,ae.createLeaf)([ve.current.step.logData],$e)},isCall:(0,ae.createLeaf)([ve.current.step.isCall],$e),isDelegateCallBroad:(0,ae.createLeaf)([ve.current.step.isDelegateCallBroad],$e),isCreate:(0,ae.createLeaf)([ve.current.step.isCreate],$e),isInstantCallOrCreate:(0,ae.createLeaf)([ve.current.step.isInstantCallOrCreate],$e),isHalting:(0,ae.createLeaf)([ve.current.step.isHalting],$e),returnStatus:(0,ae.createLeaf)([ve.current.step.returnStatus],$e),callValue:(0,ae.createLeaf)([ve.current.step.callValue],$e),callAddress:(0,ae.createLeaf)([ve.current.step.callAddress],$e),callContext:(0,ae.createLeaf)([Ke.current.callContext],$e),absorbNextInternalCall:(0,ae.createLeaf)([Ee.current.callRequiresPhantomFrame],$e),callData:(0,ae.createLeaf)([ve.current.step.callData],$e),createBinary:(0,ae.createLeaf)([ve.current.step.createBinary],$e),createValue:(0,ae.createLeaf)([ve.current.step.createValue],$e),createdAddress:(0,ae.createLeaf)([ve.current.step.createdAddress],$e),salt:(0,ae.createLeaf)([ve.current.step.salt],$e),isSelfDestruct:(0,ae.createLeaf)([ve.current.step.isSelfDestruct],$e),beneficiary:(0,ae.createLeaf)([ve.current.step.beneficiary],$e),returnData:(0,ae.createLeaf)([ve.current.step.returnValue],$e),inputParameterAllocations:(0,ae.createLeaf)(["./astNode","./state"],((e,{stack:t})=>e&&"FunctionDefinition"===e.nodeType?ze(e.parameters.parameters,t.length-1):null)),outputParameterAllocations:(0,ae.createLeaf)(["./astNode","./state"],((e,{stack:t})=>e&&"FunctionDefinition"===e.nodeType?ze(e.returnParameters.parameters,t.length-2):null))},next:{...Ye(Ee.next)},views:{transactionLog:(0,ae.createLeaf)(["/proc/transactionLog"],(e=>{const t=n=>n.actions?{...n,actions:n.actions.map((n=>t(e[n])))}:n;return t(e[""])})),flattedEvents:(0,ae.createLeaf)(["./transactionLog"],(e=>{const t=e=>{switch(e.returnKind){case"revert":return!1;case"unwind":const n=e.actions[e.actions.length-1];return t(n);default:return!0}},n=(e,r,i,a)=>{switch(e.type){case"transaction":return e.actions.flatMap((t=>n(t,e.origin,e.origin,a)));case"callexternal":const s=t(e);return e.actions.flatMap((t=>n(t,e.isDelegate?r:e.address,e.address,a&&s)));case"callinternal":return e.actions.flatMap((e=>n(e,r,i,a)));case"event":return[{decoding:e.decoding,raw:e.raw,step:e.step,address:r,codeAddress:i,status:a}];default:return[]}};return n(e,null,null,!0)}))}});function ze(e,t){const n=e.slice().reverse();let r=[],i=t;for(let e of n){const t=f.Ast.Utils.stackSize(e),n={location:"stack",from:i-t+1,to:i};r.unshift({name:e.name?e.name:void 0,definition:e,pointer:n}),i-=t}return r}const Ze=qe,Xe=d()("debugger:session:selectors"),Je=(0,ae.createSelectorTree)({state:e=>e.session,info:{affectedInstances:(0,ae.createLeaf)([ve.transaction.affectedInstances,ve.info.contexts,Ee.info.sources],((e,t,n)=>Object.assign({},...Object.entries(e).map((([r,{context:i,binary:a,creationBinary:s,creationContext:o}])=>{Xe("instances %O",e),Xe("contexts %O",t);let c=t[i];if(!c)return{[r]:{binary:a}};let{contractName:l,compilationId:u,primarySource:d}=c;Xe("primarySource: %o",d),Xe("compilationId: %s",u),Xe("sources: %o",n);let p,f=void 0!==d?n.byCompilationId[u].byIndex[d]:void 0;if(void 0!==s){let e=t[o];e&&(p=s.slice(e.binary.length))}return{[r]:{contractName:l,source:f,binary:a,constructorArgs:p}}})))))},transaction:{_:(0,ae.createLeaf)(["/state"],(e=>e.transaction)),receipt:(0,ae.createLeaf)(["/state"],(e=>e.receipt)),block:(0,ae.createLeaf)(["/state"],(e=>e.block))},status:{readyOrError:(0,ae.createLeaf)(["/state"],(e=>e.ready)),ready:(0,ae.createLeaf)(["./readyOrError","./isError"],((e,t)=>e&&!t)),waiting:(0,ae.createLeaf)(["/state"],(e=>!e.ready)),error:(0,ae.createLeaf)(["/state"],(e=>e.lastLoadingError)),isError:(0,ae.createLeaf)(["./error"],(e=>null!==e)),success:(0,ae.createLeaf)(["./error"],(e=>null===e)),errored:(0,ae.createLeaf)(["./readyOrError","./isError"],((e,t)=>e&&t)),loaded:(0,ae.createLeaf)([fe.loaded],(e=>e)),lightMode:(0,ae.createLeaf)(["/state"],(e=>e.lightMode))}}),Qe=require("redux-saga/effects"),et="TRACE_SAVE_STEPS",tt="TRACE_TICK",nt="TRACE_TOCK",rt="TRACE_ADVANCE",it="TRACE_EOT",at="TRACE_RESET",st="TRACE_UNLOAD_TRANSACTION",ot="TRACE_SET_SUBMODULE_COUNT";function ct(e){return{type:ot,count:e}}const lt="DATA_SCOPE";function ut(e,t,n,r,i){return{type:lt,id:e,pointer:t,parentId:n,sourceIndex:r,sourceId:i}}const dt="DATA_DECLARE_VARIABLE";function pt(e,t,n,r){return{type:dt,name:e,astRef:t,scopeAstRef:n,sourceId:r}}const ft="DATA_ASSIGN";function yt(e){return{type:ft,assignments:e}}const gt="DATA_MAP_PATH_AND_ASSIGN";function mt(e,t,n,r,i){return{type:gt,address:e,slot:t,assignments:n,typeIdentifier:r,parentType:i}}const bt="DATA_RESET",ht="DATA_DEFINE_TYPE",vt="DATA_DEFINE_TAGGED_OUTPUT",Lt="DATA_ADD_CONTRACTS",xt="DATA_ALLOCATE",Ct="ENS_RECORD",St="INIT_WEB3",It="WEB3_READY",At="INSPECT_TRANSACTION",Et="FETCH_BINARY",Tt="FETCH_STORAGE",Rt="REVERSE_ENS_RESOLVE",Ot="ENS_RESOLVE",wt="RECEIVE_BINARY",_t="RECEIVE_STORAGE",kt="RECEIVE_STORAGE_FAIL",Dt="RECEIVE_ENS_NAME",Nt="RECEIVE_ENS_ADDRESS",Pt="RECEIVE_TRACE",Ut="RECEIVE_CALL";function jt({address:e,binary:t,data:n,storageAddress:r,status:i,sender:a,value:s,gasprice:o,block:c,blockHash:l,txIndex:u}){return{type:Ut,address:e,binary:t,data:n,storageAddress:r,status:i,sender:a,value:s,gasprice:o,block:c,blockHash:l,txIndex:u}}const Ft="ERROR_WEB3",Mt=require("web3");var Bt=n.n(Mt);const Vt=require("@ensdomains/ensjs");var Gt=n.n(Vt),Ht=n(837);const Wt=d()("debugger:web3:adapter");class Kt{constructor(e,t){this.web3=new(Bt())(e),this.ensRegistryAddress=t.registryAddress}async init(){if(Wt("initting; registry = %o",this.ensRegistryAddress),void 0===this.ensRegistryAddress){const e=await this.web3.eth.net.getId();this.ensRegistryAddress=(0,Vt.getEnsAddress)(e)}this.ensRegistryAddress&&(Wt("setting up"),this.ens=new(Gt())({provider:this.web3.currentProvider,ensAddress:this.ensRegistryAddress}))}async getTrace(e){const t=this.web3.currentProvider,n=await(0,Ht.promisify)(t.send.bind(t))({jsonrpc:"2.0",method:"debug_traceTransaction",id:Date.now(),params:[e,{enableMemory:!0,disableStorage:!0}]});if(n.result)return n.result.structLogs;throw new Error(n.error.message)}async getTransaction(e){return await this.web3.eth.getTransaction(e)}async getReceipt(e){return await this.web3.eth.getTransactionReceipt(e)}async getBlock(e){return await this.web3.eth.getBlock(e)}async getChainId(){return await this.web3.eth.getChainId()}async getExistingStorage(e,t,n,r){Wt("slot: %O",t);const i=this.web3.currentProvider,a=Bt().utils.soliditySha3({type:"bytes",value:t}),s=await(0,Ht.promisify)(i.send.bind(i))({jsonrpc:"2.0",method:"debug_storageRangeAt",id:Date.now(),params:[n,r,e,a,1]});if(s.result){const e=s.result.storage;return Wt("hashedSlot: %O",a),Wt("storage: %O",e),Wt("found? %O",a in e),a in e?e[a].value:"0x"+"00".repeat(f.Evm.Utils.WORD_SIZE)}throw new Error(s.error.message)}async getDeployedCode(e,t){Wt("getting deployed code for %s",e);let n=await this.web3.eth.getCode(e,t);return"0x0"===n?"0x":n}async reverseEnsResolve(e){if(!this.ens)return Wt("no ens you fool!"),null;try{return Wt("addr: %s",e),(await this.ens.getName(e)).name}catch{return null}}async ensResolve(e){if(!this.ens)return null;try{return await this.ens.name(e).getAddress()}catch{return null}}}const $t=d()("debugger:web3:sagas");function Yt(e){return e.startsWith("0x")?e.slice(2).padStart(2*f.Evm.Utils.WORD_SIZE,"0"):e}function*qt(e,{txHash:t}){var n,r;$t("inspecting transaction");try{n=yield(0,Qe.apply)(e,e.getTrace,[t])}catch(e){return $t("putting error"),void(yield(0,Qe.put)((r=e,{type:Ft,error:r})))}$t("got trace"),n=n.map((e=>({...e,stack:e.stack.map(Yt),memory:e.memory.map(Yt)}))),yield(0,Qe.put)(function(e){return{type:Pt,trace:e}}(n));const i=yield(0,Qe.apply)(e,e.getTransaction,[t]);$t("tx %O",i);const a=yield(0,Qe.apply)(e,e.getReceipt,[t]);$t("receipt %O",a);const s=yield(0,Qe.apply)(e,e.getBlock,[i.blockNumber]);$t("block %O",s);const o=yield(0,Qe.apply)(e,e.getChainId);let c;yield(0,Qe.put)(function(e){return{type:J,transaction:e}}(i)),yield(0,Qe.put)(function(e){return{type:Q,receipt:e}}(a)),yield(0,Qe.put)(function(e){return{type:ee,block:e}}(s));const l=s.prevRandao||s.mixHash,u=new(ge())(l.slice(2),16);c=u.isZero()?new(ge())(s.difficulty):u;const d={coinbase:s.miner,difficulty:c,gaslimit:new(ge())(s.gasLimit),number:new(ge())(s.number),timestamp:new(ge())(s.timestamp),chainid:new(ge())(o),basefee:new(ge())(parseInt(s.baseFeePerGas))};if(null!=i.to)yield(0,Qe.put)(jt({address:i.to,data:i.input,storageAddress:i.to,status:a.status,sender:i.from,value:new(ge())(i.value),gasprice:new(ge())(i.gasPrice),block:d,blockHash:s.hash,txIndex:i.transactionIndex}));else{const e=Bt().utils.isAddress(a.contractAddress)?a.contractAddress:f.Evm.Utils.ZERO_ADDRESS;yield(0,Qe.put)(jt({binary:i.input,storageAddress:e,status:a.status,sender:i.from,value:new(ge())(i.value),gasprice:new(ge())(i.gasPrice),block:d,blockHash:s.hash,txIndex:i.transactionIndex}))}}function*zt(e){$t("putting"),yield(0,Qe.put)(function(e){return{type:At,txHash:e}}(e)),$t("waiting");let t=yield(0,Qe.take)([Pt,Ft]);var n;if($t("action %o",t),t.type!=Pt)return{error:t.error};n=t.trace,$t("received trace");let{address:r,binary:i,data:a,storageAddress:s,status:o,sender:c,value:l,gasprice:u,block:d,blockHash:p,txIndex:f}=yield(0,Qe.take)(Ut);return $t("received call"),{trace:n,address:r,binary:i,data:a,storageAddress:s,status:o,sender:c,value:l,gasprice:u,block:d,blockHash:p,txIndex:f}}function*Zt(e,t){let n=yield(0,Qe.all)(e.map((e=>(0,Qe.fork)(Jt,e))));$t("requesting binaries"),yield(0,Qe.all)(e.map((e=>(0,Qe.put)(function(e,t){return{type:Et,address:e,block:t}}(e,t)))));let r=[];return r=yield(0,Qe.join)(n),$t("binaries %o",r),r}function*Xt(e,{address:t,block:n}){$t("fetching binary for %s",t);let r=yield(0,Qe.apply)(e,e.getDeployedCode,[t,n]);$t("received binary for %s",t),yield(0,Qe.put)(function(e,t){return{type:wt,address:e,binary:t}}(t,r))}function*Jt(e){let{binary:t}=yield(0,Qe.take)((t=>t.type==wt&&t.address==e));return $t("got binary for %s",e),t}function*Qt(e){$t("forking receive name for %s",e);const t=yield(0,Qe.fork)(tn,e);return $t("putting the action to kick things off"),yield(0,Qe.put)(function(e){return{type:Rt,address:e}}(e)),$t("waiting (outer)"),yield(0,Qe.join)(t)}function*en(e,{address:t}){$t("got reverse action; address = %s",t);const n=yield(0,Qe.apply)(e,e.reverseEnsResolve,[t]);$t("got name = %o, passing it on",n),yield(0,Qe.put)(function(e,t){return{type:Dt,address:e,name:t}}(t,n))}function*tn(e){$t("waiting (inner)");const{name:t}=yield(0,Qe.take)((t=>t.type==Dt&&t.address==e));return $t("received name = %s, returning",t),t}function*nn(e){const t=yield(0,Qe.fork)(an,e);return yield(0,Qe.put)(function(e){return{type:Ot,name:e}}(e)),yield(0,Qe.join)(t)}function*rn(e,{name:t}){const n=yield(0,Qe.apply)(e,e.ensResolve,[t]);yield(0,Qe.put)(function(e,t){return{type:Nt,address:t,name:e}}(t,n))}function*an(e){const{address:t}=yield(0,Qe.take)((t=>t.type==Nt&&t.name==e));return t}function*sn(e,t,n,r){$t("forking");const i=yield(0,Qe.fork)((function*(){return yield(0,Qe.race)({success:(0,Qe.call)(cn,e,t),failure:(0,Qe.call)(ln)})}));yield(0,Qe.put)(function(e,t,n,r){return{type:Tt,address:e,slot:t,blockHash:n,txIndex:r}}(e,t,n,r)),$t("joining");const a=yield(0,Qe.join)(i);if($t("result: %O",a),a.failure)throw a.failure;return a.success}function*on(e,{address:t,slot:n,blockHash:r,txIndex:i}){const a=f.Conversion.toHexString(n,f.Evm.Utils.WORD_SIZE);try{const s=yield(0,Qe.apply)(e,e.getExistingStorage,[t,a,r,i]);yield(0,Qe.put)(function(e,t,n){return{type:_t,address:e,slot:t,word:n}}(t,n,s))}catch(e){yield(0,Qe.put)(function(e){return{type:kt,error:e}}(e))}}function*cn(e,t){const{word:n}=yield(0,Qe.take)((n=>n.type==_t&&n.address==e&&n.slot.eq(t)));return n}function*ln(){const{error:e}=yield(0,Qe.take)(kt);return e}function*un(e,t){yield(0,Qe.put)(function(e,t){return{type:St,provider:e,ensOptions:t}}(e,t)),yield(0,Qe.take)(It)}function*dn(){const{provider:e,ensOptions:t}=yield(0,Qe.take)(St);let n=new Kt(e,t);yield(0,Qe.apply)(n,n.init),yield(0,Qe.takeEvery)(At,qt,n),yield(0,Qe.takeEvery)(Et,Xt,n),yield(0,Qe.takeEvery)(Tt,on,n),yield(0,Qe.takeEvery)(Rt,en,n),yield(0,Qe.takeEvery)(Ot,rn,n),yield(0,Qe.put)({type:It})}const pn=b("web3",dn),fn=(d()("debugger:ens:selectors"),(0,ae.createSelectorTree)({state:e=>e.ens,current:{cache:(0,ae.createLeaf)(["/state"],(e=>e.proc.cache))}})),yn=d()("debugger:ens:sagas");function*gn(e){const t=yield*function*(e){yn("reverse resolving %s",e);const t=yield(0,Qe.select)(fn.current.cache);if(e in t)return yn("got cached %o",t[e]),t[e];{let t=yield*Qt(e);if(yn("got name %o",t),null!==t){yn("forward resolving %s",t);const n=yield*function*(e){return yield*nn(e)}(t);yn("got check address %o",n),n!==e&&(t=null)}return yield(0,Qe.put)(function(e,t){return{type:Ct,address:e,name:t}}(e,t)),yn("returning %o",t),t}}(e);return null===t?null:f.Conversion.stringToBytes(t)}const mn="EVM_ADD_CONTEXT",bn="EVM_ADD_INSTANCE";function hn(e,t,n){return{type:bn,address:e,context:t,binary:n}}const vn="EVM_ADD_AFFECTED_INSTANCE";function Ln(e,t,n,r,i){return{type:vn,address:e,context:t,binary:n,creationBinary:r,creationContext:i}}const xn="EVM_SAVE_GLOBALS",Cn="EVM_SAVE_TX_IDENTIFICATION",Sn="EVM_SAVE_STATUS",In="EVM_CALL";function An(e,t,n,r,i){return{type:In,address:e,data:t,storageAddress:n,sender:r,value:i}}const En="EVM_CREATE";function Tn(e,t,n,r){return{type:En,binary:e,storageAddress:t,sender:n,value:r}}const Rn="EVM_RETURN_CALL",On="EVM_RETURN_CREATE",wn="EVM_FAIL",_n="EVM_STORE",kn="EVM_LOAD";function Dn(e,t,n){return{type:kn,address:e,slot:t,value:n}}const Nn="EVM_RESET",Pn="EVM_UNLOAD_TRANSACTION",Un="EVM_SET_STORAGE_LOOKUP",jn="EVM_SET_STORAGE_LOOKUP_SUPPORT",Fn=d()("debugger:trace:sagas");function*Mn(){let e=yield(0,Qe.select)(fe.stepsRemaining);Fn("remaining: %o",e);let t=yield(0,Qe.select)(fe.steps);Fn("total steps: %o",t.length);let n=0;if(e>0){for(n=yield(0,Qe.select)(fe.application.submoduleCount),yield(0,Qe.put)({type:tt});n>0;)yield(0,Qe.take)(nt),n--;e--}e?yield(0,Qe.put)({type:rt}):yield(0,Qe.put)({type:it})}function*Bn(){yield(0,Qe.put)({type:nt})}const Vn=d()("debugger:evm:sagas");function*Gn(e){const t=e.context||L({type:"string",value:e.binary});return Vn("context %O",e),yield(0,Qe.put)(function(e){return{...e,type:mn}}({...e,context:t})),t}function*Hn(e,t){const n=(yield(0,Qe.select)(ve.info.binaries.search))(t);return yield(0,Qe.put)(hn(e,n,t)),n}function*Wn(e,t,n){const r=f.Conversion.toHexString(t,f.Evm.Utils.WORD_SIZE).slice(2);yield(0,Qe.put)(Dn(e,r,n))}function*Kn(e){const t=(yield(0,Qe.select)(ve.transaction.globals.block)).number.toString(),n=yield(0,Qe.select)(ve.current.codex.instances);if(e in n)return f.Conversion.toBytes(n[e].binary);{Vn("fetching binary");let n=(yield*Zt([e],t))[0];return Vn("adding instance"),yield*Hn(e,n),f.Conversion.toBytes(n)}}function*$n(e){const t=yield(0,Qe.select)(ve.current.codex.storage),n=f.Conversion.toHexString(e).slice(2);if(n in t)return f.Conversion.toBytes(t[n]);if(yield(0,Qe.select)(ve.application.storageLookup)){const t=(yield(0,Qe.select)(ve.current.call)).storageAddress,n=yield(0,Qe.select)(ve.transaction.blockHash),r=yield(0,Qe.select)(ve.transaction.txIndex),i=yield*sn(t,e,n,r);return yield*Wn(t,e,i),f.Conversion.toBytes(i)}return null}function*Yn(e,t,n){const r=yield(0,Qe.select)(ve.info.binaries.search),i=r(t),a=n?r(n):null;return yield(0,Qe.put)(Ln(e,i,t,n,a)),i}function*qn(){const e=yield(0,Qe.select)(ve.current.codex.instances),t=yield(0,Qe.select)(ve.transaction.affectedInstances);for(let[t,{binary:n}]of Object.entries(e)){const e=(yield(0,Qe.select)(ve.info.binaries.search))(n);yield(0,Qe.put)(hn(t,e,n))}for(let[e,{binary:n,creationBinary:r}]of Object.entries(t)){const t=yield(0,Qe.select)(ve.info.binaries.search),i=t(n),a=r?t(r):null;yield(0,Qe.put)(Ln(e,i,n,r,a))}}function*zn({address:e,binary:t,data:n,storageAddress:r,status:i,sender:a,value:s,gasprice:o,block:c,blockHash:l,txIndex:u}){yield(0,Qe.put)(function(e,t,n){return{type:xn,origin:e,gasprice:t,block:n}}(a,o,c)),yield(0,Qe.put)(function(e){return{type:Sn,status:e}}(i)),yield(0,Qe.put)(function(e,t){return{type:Cn,blockHash:e,txIndex:t}}(l,u)),e?yield(0,Qe.put)(An(e,n,r,a,s)):yield(0,Qe.put)(Tn(t,r,a,s))}function*Zn(){Vn("got TICK"),yield*Xn(),yield*Bn()}function*Xn(){if(yield(0,Qe.select)(ve.current.step.isExceptionalHalting))Vn("exceptional halt!"),yield(0,Qe.put)({type:wn});else if(yield(0,Qe.select)(ve.current.step.isInstantCallOrCreate));else if(yield(0,Qe.select)(ve.current.step.isCall)){Vn("got call");let e=yield(0,Qe.select)(ve.current.step.callAddress),t=yield(0,Qe.select)(ve.current.step.callData);if(Vn("calling address %s",e),yield(0,Qe.select)(ve.current.step.isDelegateCallStrict)){let{storageAddress:n,sender:r,value:i}=yield(0,Qe.select)(ve.current.call);yield(0,Qe.put)(An(e,t,n,r,i))}else{let n=yield(0,Qe.select)(ve.current.call),r=(yield(0,Qe.select)(ve.current.step.isDelegateCallBroad))?n.storageAddress:e,i=n.storageAddress,a=yield(0,Qe.select)(ve.current.step.callValue);yield(0,Qe.put)(An(e,t,r,i,a))}}else if(yield(0,Qe.select)(ve.current.step.isCreate)){Vn("got create");let e=yield(0,Qe.select)(ve.current.step.createBinary),t=yield(0,Qe.select)(ve.current.step.createdAddress),n=yield(0,Qe.select)(ve.current.step.createValue),r=(yield(0,Qe.select)(ve.current.call)).storageAddress;yield(0,Qe.put)(Tn(e,t,r,n))}else if(yield(0,Qe.select)(ve.current.step.isNormalHalting)){Vn("got return");let{binary:r,storageAddress:i}=yield(0,Qe.select)(ve.current.call);if(r){let r=yield(0,Qe.select)(ve.current.step.returnValue),a=(yield(0,Qe.select)(ve.info.binaries.search))(r);yield(0,Qe.put)((e=i,t=r,n=a,{type:On,address:e,code:t,context:n}))}else yield(0,Qe.put)({type:Rn})}else if(yield(0,Qe.select)(ve.current.step.isStore)){let e=(yield(0,Qe.select)(ve.current.call)).storageAddress,t=yield(0,Qe.select)(ve.current.step.storageAffected),n=yield(0,Qe.select)(ve.current.step.valueStored);yield(0,Qe.put)(function(e,t,n){return{type:_n,address:e,slot:t,value:n}}(e,t,n))}else if(yield(0,Qe.select)(ve.current.step.isLoad)){let e=(yield(0,Qe.select)(ve.current.call)).storageAddress,t=yield(0,Qe.select)(ve.current.step.storageAffected),n=yield(0,Qe.select)(ve.current.step.valueLoaded);yield(0,Qe.put)(Dn(e,t,n))}var e,t,n}function*Jn(){const e=yield(0,Qe.select)(ve.transaction.initialCall);yield(0,Qe.put)({type:Nn,storageAddress:undefined}),yield(0,Qe.put)(e)}function*Qn(){yield(0,Qe.put)({type:Pn})}function*er(e){const t=yield*function*(){const e=yield(0,Qe.select)(ve.application.storageLookupSupported);if(null!==e)return e;const t=yield(0,Qe.select)(ve.transaction.blockHash);let n;try{yield*sn(f.Evm.Utils.ZERO_ADDRESS,new(ge())(0),t,0),n=!0}catch{n=!1}return yield(0,Qe.put)(function(e){return{type:jn,status:e}}(n)),n}();if(e&&!t)throw new Error("The storageLookup option was passed, but the debug_storageRangeAt method is not available on this client.");yield(0,Qe.put)(function(e){return{type:Un,status:e}}(e))}function*tr(){yield(0,Qe.takeEvery)(tt,Zn)}const nr=b("evm",tr),rr=require("lodash/sum");var ir=n.n(rr);const ar=d()("debugger:data:sagas");function*sr(e,t,n,r,i){yield(0,Qe.put)(ut(e,t,n,r,i))}function*or(e,t){yield(0,Qe.put)(pt(e.name,e.id,e.scope,t))}function*cr(e,t,n,r){yield(0,Qe.put)(ut(void 0,e,r,t,n))}function*lr(e,t,n,r,i){yield(0,Qe.put)(pt(e.name,h(r,t),h(r,n),i))}function*ur(e,t){yield(0,Qe.put)(function(e,t){return{type:ht,node:e,sourceId:t}}(e,t))}function*dr(e,t){yield(0,Qe.put)(function(e,t){return{type:vt,node:e,sourceId:t}}(e,t))}function*pr(){yield*function*(){if(!(yield(0,Qe.select)(Ke.views.atLastInstructionForSourceRange)))return;let e,t=yield(0,Qe.select)(Ke.current.node);if(!t)return;switch(t.nodeType){case"IndexAccess":case"MemberAccess":e=yield(0,Qe.select)(Ke.nextUserStep.state.stack);break;case"YulFunctionCall":e=yield(0,Qe.select)(Ke.nextOfSameDepth.state.stack);break;default:e=yield(0,Qe.select)(Ke.next.state.stack)}if(!e)return;const n=e.length-1;let r=yield(0,Qe.select)(Ke.current.pointer);const i=yield(0,Qe.select)(Ke.current.functionDepth),a=yield(0,Qe.select)(Ke.current.modifierDepth),s=yield(0,Qe.select)(Ke.current.inModifier),o=yield(0,Qe.select)(Ke.current.address),c=yield(0,Qe.select)(Ke.current.compilationId),l=yield(0,Qe.select)(Ke.current.internalSourceFor);let u,d;if(yield(0,Qe.select)(Ke.current.aboutToModify)){const e=yield(0,Qe.select)(Ke.current.modifierBeingInvoked),t=yield(0,Qe.select)(Ke.current.modifierArgumentIndex);ar("currentIndex %d",t);const r=e.parameters.parameters,s=r.slice(t+1),o=ir()(s.map(f.Ast.Utils.stackSize));ar("adjustment %d",o),d=yr(c,l,r,n+o,i,a,"ModifierDefinition"===e.nodeType)}else d={};switch(t.nodeType){case"FunctionDefinition":case"ModifierDefinition":if(yield(0,Qe.select)(Ke.current.isPop))break;const p=yield(0,Qe.select)(Ke.next.modifierBeingInvoked);if(p&&p.id===t.id)break;u=yr(c,l,t.parameters.parameters,n,i,a,s),ar("Function definition case"),ar("assignments %O",u),yield(0,Qe.put)(yt(u));break;case"YulFunctionDefinition":{const e=yield(0,Qe.select)(Ke.next.pointer);if(!(yield(0,Qe.select)(Ke.current.onYulFunctionDefinitionWhileEntering)))break;let o=[];e.startsWith(`${r}/body/`)&&(o=(t.returnVariables||[]).map(((e,t,n)=>"/returnVariables/"+(n.length-1-t))));const d=(t.parameters||[]).map(((e,t)=>`/parameters/${t}`));let p=[];if(!(yield(0,Qe.select)(Ke.current.bareLetsInYulAreHit))){let e=0;for(const n of t.body.statements){if("YulVariableDeclaration"!==n.nodeType||null!=n.value)break;for(let t=0;t<n.variables.length;t++)p.unshift(`/body/statements/${e}/variables/${t}`);e++}}const f=p.concat(o,d);ar("suffixes: %O",f),u={};let y=n;const g=yield(0,Qe.select)(Ke.current.sourceIndex);for(const e of f){const t=C({compilationId:c,internalFor:l,astRef:h(g,r+e),stackframe:i,modifierDepth:s?a:null},{location:"stack",from:y,to:y});u[t.id]=t,y--}yield(0,Qe.put)(yt(u));break}case"ContractDefinition":{const e=yield(0,Qe.select)(Ke.current.allocations.state),n=e[t.id];ar("Contract definition case"),ar("allocations %O",e),ar("allocation %O",n),u={};for(let e in n.members){e=Number(e);const t=C({compilationId:c,internalFor:l,astRef:e},n.members[e].pointer);u[t.id]=t}const r=t.nodes.find((e=>"FunctionDefinition"===e.nodeType&&"fallback"===f.Ast.Utils.functionKind(e)));if(r){const e=r.parameters.parameters[0];if(e){const t=yield(0,Qe.select)(Ke.current.fallbackBase),n={location:"stack",from:t,to:t+f.Ast.Utils.stackSize(e)-1},r=C({compilationId:c,internalFor:l,astRef:e.id,stackframe:i,modifierDepth:null},n);u[r.id]=r}}ar("assignments %O",u),yield(0,Qe.put)(yt(u));break}case"FunctionTypeName":{const e=yield(0,Qe.select)(Ke.current.scopes.inlined);if(t=e[e[t.id].parentId].definition,"VariableDeclaration"!==t.nodeType)break}case"VariableDeclaration":{const e=t.id;if(ar("Variable declaration case"),ar("currentDepth %d varId %d",i,e),!(yield(0,Qe.select)(Ke.current.inFunctionOrModifier))){ar("already a contract variable!");break}const r=C({compilationId:c,internalFor:l,astRef:e,stackframe:i,modifierDepth:s?a:null},{location:"stack",from:n-f.Ast.Utils.stackSize(t)+1,to:n});u={[r.id]:r},ar("assignments: %O",u),yield(0,Qe.put)(yt(u));break}case"YulFunctionCall":{const e=yield(0,Qe.select)(Ke.next.pointer);if(null!==e&&e.startsWith(r))break}case"YulLiteral":case"YulIdentifier":const y=r.replace(/\/[^/]*$/,""),g=yield(0,Qe.select)(Ke.current.root),m=oe().get(g,y);if(r!==`${y}/value`||"YulVariableDeclaration"!==m.nodeType)break;t=m,r=y;case"YulVariableDeclaration":{const e=h(yield(0,Qe.select)(Ke.current.sourceIndex),r);ar("sourceAndPointer: %s",e),u={};let o=n;for(let n=t.variables.length-1;n>=0;n--){const t=C({compilationId:c,internalFor:l,astRef:`${e}/variables/${n}`,stackframe:i,modifierDepth:s?a:null},{location:"stack",from:o,to:o});u[t.id]=t,o--}yield(0,Qe.put)(yt(u));break}case"YulTypedName":{const e=C({compilationId:c,internalFor:l,astRef:h(yield(0,Qe.select)(Ke.current.sourceIndex),r),stackframe:i,modifierDepth:s?a:null},{location:"stack",from:n,to:n});yield(0,Qe.put)(yt({[e.id]:e}));break}case"IndexAccess":{ar("Index access case"),u={...d,...fr(c,l,t,e,i,a,s)};const n=t.baseExpression;if("bytes"===f.Ast.Utils.typeClass(n)||"array"===f.Ast.Utils.typeClass(n)&&(f.Ast.Utils.isReference(t)?"storage"!==f.Ast.Utils.referenceType(n):!f.Ast.Utils.isMapping(t))){ar("Index case bailed out early"),ar("typeClass %s",f.Ast.Utils.typeClass(n)),ar("referenceType %s",f.Ast.Utils.referenceType(n)),ar("isReference(node) %o",f.Ast.Utils.isReference(t)),yield(0,Qe.put)(yt(u));break}const r=yield(0,Qe.select)(Ke.current.allocations.state),p=gr(c,l,n,yield(0,Qe.select)(Ke.proc.assignments),r,i,a,s);if(null===p){ar("bailed out due to failed path"),yield(0,Qe.put)(yt(u));break}const y=yield(0,Qe.select)(Ke.current.scopes.inlined);let g=f.Ast.Utils.keyDefinition(n,y),m=yield*function*(e,t){let n=yield*function*(e,t){const n=yield(0,Qe.select)(Ke.current.scopes.inlined),r=yield(0,Qe.select)(Ke.current.compilationId),i=yield(0,Qe.select)(Ke.current.internalSourceFor),a=yield(0,Qe.select)(Ke.proc.assignments),s=yield(0,Qe.select)(Ke.current.functionDepth),o=yield(0,Qe.select)(Ke.current.modifierDepth),c=yield(0,Qe.select)(Ke.current.inModifier);for(;;){const l=(a[x({compilationId:r,internalFor:i,astRef:e.id,stackframe:s,modifierDepth:c?o:null})]||{}).ref;if(ar("indexDefinition.nodeType: %o",e.nodeType),ar("indexDefinition.kind: %o",e.kind),f.Ast.Utils.isSimpleConstant(e))return ar("about to decode simple literal"),yield*mr(t,{location:"definition",definition:e},r);if(l){let n;return n=f.Ast.Utils.isReference(e)?f.Ast.Utils.spliceLocation(t,f.Ast.Utils.referenceType(e)):t,ar("about to decode"),yield*mr(n,l,r)}if(e.referencedDeclaration&&n[e.referencedDeclaration]){ar("referencedDeclaration %d",e.referencedDeclaration);let i=n[e.referencedDeclaration].definition;if(ar("indexConstantDeclaration %O",i),i.constant){let e=i.value;return f.Ast.Utils.isSimpleConstant(e)?(ar("about to decode simple constant"),yield*mr(t,{location:"definition",definition:i.value},r)):null}return null}if("FunctionCall"===e.nodeType&&"typeConversion"===e.kind)ar("type conversion case"),e=e.arguments[0];else if("UnaryOperation"===e.nodeType&&"+"===e.operator)ar("unary + case"),e=e.subExpression;else{if("FunctionCall"!==e.nodeType||"functionCall"!==e.kind||!["wrap","unwrap"].includes(f.Ast.Utils.functionClass(e.expression)))return ar("we failed"),null;ar("wrap/unwrap case"),e=e.arguments[0]}ar("retrying")}}(e,t);if(!n)return n;switch(n=f.Conversion.cleanBool(n),n.kind){case"value":return n;case"error":return null}return n?f.Conversion.cleanBool(n):n}(t.indexExpression,g);if(ar("index value %O",m),ar("keyDefinition %o",g),null!=m&&m.value){let e={path:p};switch(f.Ast.Utils.typeClass(n)){case"array":const r=yield(0,Qe.select)(Ke.current.compiler),i=yield(0,Qe.select)(Ke.info.allocations.storage),a=yield(0,Qe.select)(Ke.views.userDefinedTypes);e.hashPath=f.Ast.Utils.isDynamicArray(n),e.offset=m.value.asBN.muln(f.Storage.Allocate.storageSize(f.Ast.Import.definitionToType(t,c,r),a,i).words);break;case"mapping":e.key=m,e.offset=new(ge())(0);break;default:ar("unrecognized index access!")}ar("slot %O",e),yield(0,Qe.put)(mt(o,e,u,f.Ast.Utils.typeIdentifier(t),f.Ast.Utils.typeIdentifier(n)))}else ar("failed to decode, just assigning"),yield(0,Qe.put)(yt(u));break}case"MemberAccess":{u={...d,...fr(c,l,t,e,i,a,s)},ar("Member access case");const n=t.expression;if("struct"!==f.Ast.Utils.typeClass(n)||(f.Ast.Utils.isReference(t)?"storage"!==f.Ast.Utils.referenceType(n):!f.Ast.Utils.isMapping(t))){ar("Member case bailed out early"),yield(0,Qe.put)(yt(u));break}const r=yield(0,Qe.select)(Ke.current.allocations.state),p=gr(c,l,n,yield(0,Qe.select)(Ke.proc.assignments),r,i,a,s);if(null===p){ar("bailed out due to failed path"),yield(0,Qe.put)(yt(u));break}let y={path:p};const g=yield(0,Qe.select)(Ke.current.compiler),m=f.Ast.Import.definitionToType(n,c,g),b=(yield(0,Qe.select)(Ke.info.allocations.storage))[m.id].members,h=(yield(0,Qe.select)(Ke.current.scopes.inlined))[t.referencedDeclaration].definition.name,v=b.find((e=>e.name===h));y.offset=v.pointer.range.from.slot.offset.clone(),ar("slot %o",y),yield(0,Qe.put)(mt(o,y,u,f.Ast.Utils.typeIdentifier(t),f.Ast.Utils.typeIdentifier(n)));break}default:if(void 0===t.id||null==t.typeDescriptions)break;ar("decoding expression value %O",t.typeDescriptions),ar("default case"),ar("currentDepth %d node.id %d",i,t.id),u={...d,...fr(c,l,t,e,i,a,s)},yield(0,Qe.put)(yt(u))}}(),yield*Bn()}function fr(e,t,n,r,i,a,s){let o,c=r.length-1;try{o=f.Stack.Read.readStack({location:"stack",from:c-f.Ast.Utils.stackSize(n)+1,to:c},{stack:r,storage:{}})}catch(e){o=void 0}let l=C({compilationId:e,internalFor:t,astRef:n.id,stackframe:i,modifierDepth:s?a:null},{location:"stackliteral",literal:o});return{[l.id]:l}}function yr(e,t,n,r,i,a=0,s=!1){let o=n.slice().reverse();ar("reverseParameters %o",n);let c=r,l={};for(let n of o){let r=f.Ast.Utils.stackSize(n),o={location:"stack",from:c-r+1,to:c},u=C({compilationId:e,internalFor:t,astRef:n.id,stackframe:i,modifierDepth:s?a:null},o);l[u.id]=u,c-=r}return l}function gr(e,t,n,r,i,a,s,o){const c=x({compilationId:e,internalFor:t,astRef:n.id,stackframe:a,modifierDepth:o?s:null});ar("astId: %d",n.id),ar("stackframe: %d",a),ar("fullId: %s",c),ar("currentAssignments: %O",r);const l=r[c];if(l)return{offset:f.Conversion.toBN(l.ref.literal)};const u=n.referencedDeclaration;if(null!=u){const e=i[u];if(e&&"storage"===e.pointer.location)return e.pointer.range.from.slot}return null}function*mr(e,t,n){const r=yield(0,Qe.select)(Ke.views.userDefinedTypes),i=yield(0,Qe.select)(Ke.current.state),a=yield(0,Qe.select)(Ke.views.mappingKeys),s=yield(0,Qe.select)(Ke.info.allocations),o=yield(0,Qe.select)(Ke.views.contexts),c=yield(0,Qe.select)(Ke.current.context),l=yield(0,Qe.select)(Ke.current.internalFunctionsTable),u=yield(0,Qe.select)(Ke.current.internalFunctionsTableKind);ar("definition: %o"),ar("ref: %o"),ar("compilationId: %s",n);const d=f.decodeVariable(e,t,{userDefinedTypes:r,state:i,mappingKeys:a,allocations:s,contexts:o,currentContext:c,internalFunctionsTable:l,internalFunctionsTableKind:u},n);ar("beginning decoding");let p=d.next();for(;!p.done;){ar("request received");let e,t=p.value;switch(t.type){case"storage":e=yield*$n(t.slot);break;case"code":e=yield*Kn(t.address);break;case"ens-primary-name":e=yield*gn(t.address);default:ar("unrecognized request type!")}ar("sending response"),ar("response: %O",e),p=d.next(e)}return ar("done decoding"),ar("decoded value: %O",p.value),p.value}function*br(){const e=yield(0,Qe.select)(Ke.views.userDefinedTypes),t=yield(0,Qe.select)(Ke.next.state),n=yield(0,Qe.select)(Ke.info.allocations),r=yield(0,Qe.select)(Ke.views.contexts),i=yield(0,Qe.select)(Ke.current.context),a=yield(0,Qe.select)(Ke.current.returnStatus),s=yield(0,Qe.select)(Ke.current.returnAllocation),o=yield(0,Qe.select)(Ke.current.errorId),c=yield(0,Qe.select)(Ke.current.internalFunctionsTable),l=yield(0,Qe.select)(Ke.current.internalFunctionsTableKind);ar("returnAllocation: %O",s);const u=f.decodeReturndata({userDefinedTypes:e,state:t,allocations:n,contexts:r,currentContext:i,internalFunctionsTable:c,internalFunctionsTableKind:l},s,a,o);ar("beginning decoding");let d=u.next();for(;!d.done;){ar("request received");let e,t=d.value;switch(t.type){case"code":e=yield*Kn(t.address);break;case"ens-primary-name":e=yield*gn(t.address);default:ar("unrecognized request type!")}ar("sending response"),d=u.next(e)}return ar("done decoding"),ar("decoded value: %O",d.value),d.value}function*hr(e=!1){const t=yield(0,Qe.select)(Ke.current.isCall),n=yield(0,Qe.select)(Ke.current.isCreate);if(!t&&!n&&!e)return null;const r=yield(0,Qe.select)(Ke.current.currentCallIsCreate),i=yield(0,Qe.select)(Ke.views.userDefinedTypes);let a=e?yield(0,Qe.select)(Ke.current.state):yield(0,Qe.select)(Ke.next.state);e&&r&&(a={...a,calldata:a.code});const s=yield(0,Qe.select)(Ke.info.allocations);ar("allocations: %O",s);const o=yield(0,Qe.select)(Ke.views.contexts),c=e?yield(0,Qe.select)(Ke.current.context):yield(0,Qe.select)(Ke.current.callContext),l=e?yield(0,Qe.select)(Ke.current.currentCallIsCreate):n,u=f.decodeCalldata({state:a,userDefinedTypes:i,allocations:s,contexts:o,currentContext:c},l);ar("beginning decoding");let d=u.next();for(;!d.done;){ar("request received");let e,t=d.value;switch(t.type){case"code":e=yield*Kn(t.address);break;case"ens-primary-name":e=yield*gn(t.address);default:ar("unrecognized request type!")}ar("sending response"),d=u.next(e)}return ar("done decoding"),d.value}function*vr(){const e=yield(0,Qe.select)(Ke.views.userDefinedTypes),t=yield(0,Qe.select)(Ke.current.state),n=yield(0,Qe.select)(Ke.info.allocations),r=yield(0,Qe.select)(Ke.views.contexts),i=yield(0,Qe.select)(Ke.current.context),a=yield(0,Qe.select)(Ke.current.eventId),s=yield(0,Qe.select)(Ke.current.internalFunctionsTable),o=yield(0,Qe.select)(Ke.current.internalFunctionsTableKind),c=f.decodeEvent({userDefinedTypes:e,state:t,allocations:n,contexts:r,currentContext:i,internalFunctionsTable:s,internalFunctionsTableKind:o},null,{id:a});ar("beginning decoding");let l=c.next();for(;!l.done;){ar("request received");let e,t=l.value;switch(t.type){case"code":e=yield*Kn(t.address);break;case"ens-primary-name":e=yield*gn(t.address);default:ar("unrecognized request type!")}ar("sending response"),l=c.next(e)}return ar("done decoding"),ar("decoded value: %O",l.value),l.value}function*Lr(){yield(0,Qe.put)({type:bt})}function*xr(){const e=yield(0,Qe.select)(Ke.views.contractAllocationInfo),t=yield(0,Qe.select)(Ke.views.referenceDeclarations),n=yield(0,Qe.select)(Ke.views.userDefinedTypesByCompilation),r=yield(0,Qe.select)(Ke.views.userDefinedTypes),i=f.Storage.Allocate.getStorageAllocations(n),a=f.Memory.Allocate.getMemoryAllocations(r),s=f.AbiData.Allocate.getAbiAllocations(r),o=f.AbiData.Allocate.getCalldataAllocations(e,t,r,s),c=f.AbiData.Allocate.getReturndataAllocations(e,t,r,s),l=f.AbiData.Allocate.getEventAllocations(e,t,r,s,!0),u=f.Storage.Allocate.getStateAllocations(e,t,r,i);var d,p,y,g,m,b,h;yield(0,Qe.put)((d=i,p=a,y=s,g=o,m=c,b=l,h=u,{type:xt,storage:d,memory:p,abi:y,calldata:g,returndata:m,event:b,state:h}))}function*Cr(e){yield(0,Qe.put)(function(e){return{type:Lt,contracts:e}}(e))}function*Sr(){yield(0,Qe.takeEvery)(tt,pr)}const Ir=b("data",Sr),Ar="TXLOG_INTERNAL_CALL",Er="TXLOG_ABSORBED_CALL",Tr="TXLOG_INTERNAL_RETURN";function Rr(e,t,n,r){return{type:Tr,pointer:e,newPointer:t,step:n,variables:r}}const Or="TXLOG_EXTERNAL_CALL";function wr(e,t,n,r,i,a,s,o,c,l,u){return{type:Or,pointer:e,newPointer:t,step:n,address:r,context:i,value:a,isDelegate:s,kind:o,decoding:c,calldata:l,absorbNextInternalCall:u}}const _r="TXLOG_INSTANT_EXTERNAL_CALL",kr="TXLOG_CREATE";function Dr(e,t,n,r,i,a,s,o,c){return{type:kr,pointer:e,newPointer:t,step:n,address:r,context:i,value:a,salt:s,decoding:o,binary:c}}const Nr="TXLOG_INSTANT_CREATE",Pr="TXLOG_EXTERNAL_RETURN",Ur="TXLOG_SELFDESTRUCT",jr="TXLOG_REVERT",Fr="TXLOG_IDENTIFY_FUNCTION_CALL",Mr="TXLOG_LOG_EVENT",Br="TXLOG_STORE",Vr="TXLOG_RECORD_ORIGIN",Gr="TXLOG_RESET",Hr="TXLOG_UNLOAD_TRANSACTION",Wr=d()("debugger:txlog:sagas");function*Kr(){yield*function*(){const e=yield(0,Qe.select)(Ze.current.pointer),t=yield(0,Qe.select)(Ze.current.step);if(yield(0,Qe.select)(Ze.current.isHalting)){const n=yield(0,Qe.select)(Ze.current.externalReturnPointer);if(yield(0,Qe.select)(Ze.current.returnStatus))if(yield(0,Qe.select)(Ze.current.isSelfDestruct)){const r=yield(0,Qe.select)(Ze.current.beneficiary);Wr("sd: %o %o",e,n),yield(0,Qe.put)(function(e,t,n,r){return{type:Ur,pointer:e,newPointer:t,step:n,beneficiary:r}}(e,n,t,r))}else{const r=yield*br(),i=yield(0,Qe.select)(Ze.current.returnData);Wr("external return: %o %o",e,n),yield(0,Qe.put)(function(e,t,n,r,i){return{type:Pr,pointer:e,newPointer:t,step:n,decodings:r,returnData:i}}(e,n,t,r,i))}else{const r=(yield*br())[0];Wr("revert: %o %o",e,n),yield(0,Qe.put)(function(e,t,n,r){return{type:jr,pointer:e,newPointer:t,step:n,error:r}}(e,n,t,r))}}else if(yield(0,Qe.select)(Ze.current.isJump)){const n=yield(0,Qe.select)(Ze.current.jumpDirection);if("i"===n){if(!(yield(0,Qe.select)(Ze.next.inInternalSourceOrYul)))if(yield(0,Qe.select)(Ze.current.waitingForInternalCallToAbsorb))Wr("absorbed call: %o",e),yield(0,Qe.put)(function(e){return{type:Er,pointer:e}}(e));else{const n=yield(0,Qe.select)(Ze.current.nextActionPointer);Wr("internal call: %o %o",e,n),yield(0,Qe.put)(function(e,t,n){return{type:Ar,pointer:e,newPointer:t,step:n}}(e,n,t))}}else if("o"===n){const n=yield(0,Qe.select)(Ze.current.inInternalSourceOrYul),r=yield(0,Qe.select)(Ze.current.currentFunctionIsAsExpected);if(!n&&r){const n=yield(0,Qe.select)(Ze.current.internalReturnPointer),r=yield(0,Qe.select)(Ze.current.outputParameterAllocations);if(r){const i=yield(0,Qe.select)(Ze.current.compilationId);let a=[];for(let{name:e,definition:t,pointer:n}of r){e=e||void 0;const r=yield*mr(t,n,i);a.push({name:e,value:r})}Wr("internal return: %o %o",e,n),yield(0,Qe.put)(Rr(e,n,t,a))}else Wr("internal return: %o %o",e,n),yield(0,Qe.put)(Rr(e,n,t,void 0))}}}else if(yield(0,Qe.select)(Ze.current.isCall)){const n=yield(0,Qe.select)(Ze.current.nextActionPointer),r=yield(0,Qe.select)(Ze.current.callAddress),i=yield(0,Qe.select)(Ze.current.callValue),a=yield(0,Qe.select)(Ze.current.isDelegateCallBroad),s=yield(0,Qe.select)(Ze.current.callContext),o=yield(0,Qe.select)(Ze.current.callData),c=yield(0,Qe.select)(Ze.current.isInstantCallOrCreate),l=$r(s,o,c),u=yield(0,Qe.select)(Ze.current.absorbNextInternalCall),d=yield*hr();if(c){const c=yield(0,Qe.select)(Ze.current.returnStatus);Wr("instacall: %o %o",e,n),yield(0,Qe.put)(function(e,t,n,r,i,a,s,o,c,l,u,d){return{type:_r,pointer:e,newPointer:t,step:n,address:r,context:i,value:a,isDelegate:s,kind:o,decoding:c,calldata:l,absorbNextInternalCall:u,status:d}}(e,n,t,r,s,i,a,l,d,o,u,c))}else Wr("external call: %o %o",e,n),yield(0,Qe.put)(wr(e,n,t,r,s,i,a,l,d,o,u))}else if(yield(0,Qe.select)(Ze.current.isCreate)){const n=yield(0,Qe.select)(Ze.current.nextActionPointer),r=yield(0,Qe.select)(Ze.current.createdAddress),i=yield(0,Qe.select)(Ze.current.callContext),a=yield(0,Qe.select)(Ze.current.createValue),s=yield(0,Qe.select)(Ze.current.salt),o=yield(0,Qe.select)(Ze.current.isInstantCallOrCreate),c=yield(0,Qe.select)(Ze.current.createBinary),l=yield*hr();if(o){const o=yield(0,Qe.select)(Ze.current.returnStatus);Wr("instacreate: %o %o",e,n),yield(0,Qe.put)(function(e,t,n,r,i,a,s,o,c,l){return{type:Nr,pointer:e,newPointer:t,step:n,address:r,context:i,value:a,salt:s,decoding:o,binary:c,status:l}}(e,n,t,r,i,a,s,l,c,o))}else Wr("create: %o %o",e,n),yield(0,Qe.put)(Dr(e,n,t,r,i,a,s,l,c))}else if(yield(0,Qe.select)(Ze.current.isLog)){const n=(yield*vr())[0],r=yield(0,Qe.select)(Ze.current.rawEventInfo),i=yield(0,Qe.select)(Ze.current.nextActionPointer);yield(0,Qe.put)(function(e,t,n,r,i){return{type:Mr,pointer:e,newPointer:t,step:n,decoding:r,rawEventInfo:i}}(e,i,t,n,r))}else if(yield(0,Qe.select)(Ze.current.isStore)){const n=yield(0,Qe.select)(Ze.current.nextActionPointer),r=yield(0,Qe.select)(Ze.current.rawStorageSlot),i=yield(0,Qe.select)(Ze.current.rawStorageValue);yield(0,Qe.put)(function(e,t,n,r,i){return{type:Br,pointer:e,newPointer:t,step:n,rawSlot:r,rawValue:i}}(e,n,t,r,i))}else if((yield(0,Qe.select)(Ze.current.onFunctionDefinition))&&(yield(0,Qe.select)(Ze.current.waitingForFunctionDefinition))){Wr("identifying");const t=yield(0,Qe.select)(Ze.current.inputParameterAllocations);if(Wr("inputAllocations: %O",t),t){const n=yield(0,Qe.select)(Ze.current.astNode),r=yield(0,Qe.select)(Ze.current.contract),i=yield(0,Qe.select)(Ze.current.compilationId);let a=[];for(let{name:e,definition:n,pointer:r}of t){const t=yield*mr(n,r,i);a.push({name:e,value:t})}Wr("identify: %o",e),yield(0,Qe.put)(function(e,t,n,r){return{type:Fr,pointer:e,functionNode:t,contractNode:n,variables:r}}(e,n,r,a))}}}(),yield*Bn()}function $r(e,t,n){if(e){if("library"===e.contractKind)return n?"message":"library";{const n=e.abi,r=t.slice(0,2+2*f.Evm.Utils.SELECTOR_SIZE).padEnd("00",2+2*f.Evm.Utils.SELECTOR_SIZE);if(Wr("selector: %s",r),n&&r in n)return"function"}}return"message"}function*Yr(){const e=yield(0,Qe.select)(Ze.transaction.initialCall);yield(0,Qe.put)({type:Gr}),e&&(yield(0,Qe.put)(e))}function*qr(){yield(0,Qe.put)({type:Hr})}function*zr(){const e=yield(0,Qe.select)(Ze.current.pointer),t=yield(0,Qe.select)(Ze.current.nextActionPointer),n=yield(0,Qe.select)(Ze.transaction.origin);Wr("origin: %o",e),yield(0,Qe.put)(function(e,t){return{type:Vr,pointer:e,address:t}}(e,n));const{address:r,binary:i,storageAddress:a,value:s,data:o}=yield(0,Qe.select)(Ze.current.call),c=yield(0,Qe.select)(Ze.current.context),l=yield*hr(!0);if(r){const n=$r(c,o,!1),i=yield(0,Qe.select)(Ze.transaction.absorbFirstInternalCall);Wr("initial call: %o %o",e,t),yield(0,Qe.put)(wr(e,t,-1,r,c,s,!1,n,l,o,i))}else Wr("initial create: %o %o",e,t),yield(0,Qe.put)(Dr(e,t,-1,a,c,s,null,l,i))}function*Zr(){yield(0,Qe.takeEvery)(tt,Kr)}const Xr=b("txlog",Zr),Jr="SOURCEMAPPING_ADD_SOURCES",Qr="SOURCEMAPPING_JUMP",ei="SOURCEMAPPING_EXTERNAL_CALL";function ti(e){return{type:ei,guard:e}}const ni="SOURCEMAPPING_EXTERNAL_RETURN",ri="SOURCEMAPPING_CLEAR_PHANTOM_GUARD",ii="SOURCEMAPPING_RESET",ai="SOURCEMAPPING_UNLOAD_TRANSACTION",si=d()("debugger:sourcemapping:sagas");function*oi(e){yield(0,Qe.put)(function(e){return{type:Jr,sources:e}}(e))}function*ci(){si("got TICK"),yield*function*(){if(yield(0,Qe.select)(Ee.current.willReturn))yield(0,Qe.put)({type:ni});else if(yield(0,Qe.select)(Ee.current.willJump)){let e=yield(0,Qe.select)(Ee.current.jumpDirection);si("checking guard");let t=yield(0,Qe.select)(Ee.current.nextFrameIsPhantom),n=yield(0,Qe.select)(Ee.next.source);"i"===e&&t&&void 0!==n.id&&!n.internal?yield(0,Qe.put)({type:ri}):yield(0,Qe.put)(function(e){return{type:Qr,jumpDirection:e}}(e))}else if(yield(0,Qe.select)(Ee.current.willCall)){si("checking if guard needed");let e=yield(0,Qe.select)(Ee.current.callRequiresPhantomFrame);yield(0,Qe.put)(ti(e))}}(),si("instruction: %O",yield(0,Qe.select)(Ee.current.instruction)),yield*Bn()}function*li(){let e=yield(0,Qe.select)(Ee.transaction.bottomStackframeRequiresPhantomFrame);yield(0,Qe.put)(function(e){return{type:ii,guard:e}}(e))}function*ui(){yield(0,Qe.put)({type:ai})}function*di(){let e=yield(0,Qe.select)(Ee.transaction.bottomStackframeRequiresPhantomFrame);yield(0,Qe.put)(ti(e))}function*pi(){yield(0,Qe.takeEvery)(tt,ci)}const fi=b("sourcemapping",pi),yi="STACKTRACE_JUMP_IN",gi="STACKTRACE_JUMP_OUT",mi="STACKTRACE_EXTERNAL_CALL";function bi(e,t,n,r){return{type:mi,location:e,context:t,address:n,combineWithNextInternal:r}}const hi="STACKTRACE_EXTERNAL_RETURN",vi="STACKTRACE_EXECUTE_RETURN",Li="STACKTRACE_UPDATE_POSITION",xi="STACKTRACE_RESET",Ci="STACKTRACE_UNLOAD_TRANSACTION",Si=d()("debugger:stacktrace:sagas");function*Ii(){yield*function*(){const e=yield(0,Qe.select)(Ne.current.strippedLocation),t=yield(0,Qe.select)(Ne.current.lastPosition),n=yield(0,Qe.select)(Ne.current.returnCounter);let r=!1;if(yield(0,Qe.select)(Ne.current.willReturn)){const n=yield(0,Qe.select)(Ne.current.returnStatus),i=yield(0,Qe.select)(Ne.current.index),a=yield(0,Qe.select)(Ne.current.updateIndex);Si("returning!"),yield(0,Qe.put)(function(e,t,n,r){return{type:hi,from:e,status:t,location:n,index:r}}(t,n,e,a?i:null)),r=!0}else n>0&&(yield(0,Qe.select)(Ne.current.positionWillChange))&&(Si("executing!"),Si("location: %o",yield(0,Qe.select)(Ne.next.location)),Si("marked: %o",t),yield(0,Qe.put)((i=n,a=e,{type:vi,counter:i,location:a})),r=!0);var i,a;if((yield(0,Qe.select)(Ne.current.willJumpIn))&&0===n){const t=yield(0,Qe.select)(Ne.next.location),n=yield(0,Qe.select)(Ne.next.contractNode),i=yield(0,Qe.select)(Ne.next.sourceIsInternal),a=yield(0,Qe.select)(Ne.next.sourceIsGenerated);yield(0,Qe.put)(function(e,t,n,r,i){return{type:yi,location:e,functionNode:t,contractNode:n,sourceIsInternal:r,sourceIsGenerated:i}}(e,t.node,n,i,a)),r=!0}else if((yield(0,Qe.select)(Ne.current.willJumpOut))&&0===n)yield(0,Qe.put)(function(e){return{type:gi,location:e}}(e)),r=!0;else if(yield(0,Qe.select)(Ne.current.willCall)){const t=yield(0,Qe.select)(Ne.current.callContext),n=yield(0,Qe.select)(Ne.current.callAddress),i=yield(0,Qe.select)(Ne.current.callCombinesWithNextJumpIn);yield(0,Qe.put)(bi(e,t,n,i)),r=!0}r||(yield(0,Qe.put)(function(e){return{type:Li,location:e}}(e)))}(),yield*Bn()}function*Ai(){yield(0,Qe.put)({type:xi})}function*Ei(){yield(0,Qe.put)({type:Ci})}function*Ti(){const e=yield(0,Qe.select)(Ne.current.context),t=yield(0,Qe.select)(Ne.current.address),n=yield(0,Qe.select)(Ne.transaction.initialCallCombinesWithNextJumpIn);yield(0,Qe.put)(bi(null,e,t,n))}function*Ri(){yield(0,Qe.takeEvery)(tt,Ii)}const Oi=b("stacktrace",Ri),wi=d()("debugger:controller:selectors"),_i=e=>e;function ki(e,t,n,r){let i=n+r;return e(n,r).some((({range:e,node:t})=>function(e){return"InlineAssembly"===e.nodeType&&!e.AST}(t)||n<=e[0]&&e[0]<i&&!function(e){return m(e)||["VariableDeclarationStatement","Mapping","Block","InlineAssembly","YulTypedName"].includes(e.nodeType)||e.nodeType.includes("TypeName")||void 0!==e.typeDescriptions&&"stringliteral"===f.Ast.Utils.typeClass(e)}(t)))}const Di=(0,ae.createSelectorTree)({state:e=>e.controller,current:{functionDepth:(0,ae.createLeaf)([Ee.current.functionDepth],_i),executionContext:(0,ae.createLeaf)([ve.current.call],_i),willJump:(0,ae.createLeaf)([ve.current.step.isJump],_i),onBaseConstructorDefinition:(0,ae.createLeaf)(["./location/node",ve.current.context,Ee.current.contractNode],((e,t,n)=>e&&"FunctionDefinition"===e.nodeType&&"constructor"===f.Ast.Utils.functionKind(e)&&t.contractId!==n.id)),onYulFunctionDefinitionWhileEntering:(0,ae.createLeaf)([Ee.current.onYulFunctionDefinitionWhileEntering],_i),location:{sourceRange:(0,ae.createLeaf)([Ee.current.sourceRange,"/current/trace/loaded"],((e,t)=>t?e:null)),source:(0,ae.createLeaf)([Ee.current.source,"/current/trace/loaded"],((e,t)=>t?e:null)),node:(0,ae.createLeaf)([Ee.current.node,"/current/trace/loaded"],((e,t)=>t?e:null)),astRef:(0,ae.createLeaf)([Ke.current.astRef],_i),isMultiline:(0,ae.createLeaf)([Ee.current.isMultiline,"/current/trace/loaded"],((e,t)=>!!t&&e))},callstack:(0,ae.createLeaf)([Ne.current.callstack.preupdated],_i),isAnyFrameGenerated:(0,ae.createLeaf)(["./callstack"],(e=>e.some((e=>e.sourceIsGenerated)))),trace:{finished:(0,ae.createLeaf)([fe.finished],_i),loaded:(0,ae.createLeaf)([fe.loaded],_i)}},breakpoints:{_:(0,ae.createLeaf)(["/state"],(e=>e.breakpoints)),resolver:(0,ae.createLeaf)([Ee.views.sources,Ee.views.overlapFunctions],((e,t)=>n=>{let r;if(void 0===n.node){let i=n.line;i<0&&(i=0);const{sourceId:a}=n;wi("breakpoint: %O",n),wi("sources: %o",e);const{source:s,ast:o}=e[a];if(!o)return n;const c=t[a],l=s.split("\n").map((e=>e.length));let u=[0];for(let e of l)u.push(u[u.length-1]+e+1);for(wi("line: %s",s.slice(u[i],u[i]+l[i]));i<l.length&&!ki(c,0,u[i],l[i]);)wi("incrementing"),i++;r=i>=l.length?null:{...n,line:i}}else wi("node-based breakpoint"),r=n;return r}))},finished:(0,ae.createLeaf)(["/current/trace/finished"],(e=>e)),isStepping:(0,ae.createLeaf)(["./state"],(e=>e.isStepping)),stepIntoInternalSources:(0,ae.createLeaf)(["./state"],(e=>e.stepIntoInternalSources))}),Ni=Di,Pi=d()("debugger:controller:sagas"),Ui={[O]:Mi,[w]:Bi,[_]:function*(){const e=yield(0,Qe.select)(Ni.current.functionDepth),t=yield(0,Qe.select)(Ni.current.location),n=yield(0,Qe.select)(Ni.current.location.node);let r,i,a;if(n&&("FunctionDefinition"===n.nodeType&&!(yield(0,Qe.select)(Ni.current.onBaseConstructorDefinition))||(yield(0,Qe.select)(Ni.current.onYulFunctionDefinitionWhileEntering))))yield*Vi();else do{yield*Bi(),r=yield(0,Qe.select)(Ni.current.functionDepth),i=yield(0,Qe.select)(Ni.current.location),a=yield(0,Qe.select)(Ni.current.trace.finished)}while(!a&&r>=e&&(r>e||i.source.id===t.source.id&&i.sourceRange.lines.start.line===t.sourceRange.lines.start.line))},[k]:function*(){const e=yield(0,Qe.select)(Ni.current.functionDepth),t=yield(0,Qe.select)(Ni.current.location);let n,r,i;Pi("startingDepth: %d",e),Pi("starting source range: %O",(t||{}).sourceRange);do{yield*Bi(),n=yield(0,Qe.select)(Ni.current.functionDepth),r=yield(0,Qe.select)(Ni.current.location),i=yield(0,Qe.select)(Ni.current.trace.finished),Pi("currentDepth: %d",n),Pi("current source range: %O",(r||{}).sourceRange),Pi("finished: %o",i)}while(!i&&n<=e&&r.source.id===t.source.id&&r.sourceRange.lines.start.line===t.sourceRange.lines.start.line)},[D]:Vi,[U]:function*(e){let t=void 0!==e&&void 0!==e.breakpoints?e.breakpoints:yield(0,Qe.select)(Ni.breakpoints),n=!1,r=yield(0,Qe.select)(Ni.current.location),i=r.source.id,a=r.sourceRange.lines.start.line,s=r.sourceRange.start,o=r.sourceRange.start;const c=!(yield(0,Qe.select)(Ni.stepIntoInternalSources))&&void 0!==r.source.id&&!r.source.internal;let l=i,u=a,d=s,p=o;do{yield*Mi();let e=a,f=s,y=o,g=i;if(r.source.internal||(l=i,u=a,d=s,p=o),r=yield(0,Qe.select)(Ni.current.location),yield(0,Qe.select)(Ni.current.trace.finished))break;i=r.source.id,void 0!==i&&(a=r.sourceRange.lines.start.line,s=r.sourceRange.start,o=r.sourceRange.length,n=t.filter((({sourceId:t,line:n,start:r,length:m})=>void 0!==r&&void 0!==m?!(t!==i||r!==s||m!==o||i===g&&s===f&&o===y||c&&i===l&&s===d&&o===p):!(t!==i||n!==a||i===g&&a===e||c&&i===l&&a===u))).length>0)}while(!n)},[P]:function*(){let e;do{yield*Mi(),e=yield(0,Qe.select)(Ni.current.trace.finished)}while(!e)}};function*ji(){for(;;){Pi("waiting for control action");let e=yield(0,Qe.take)(Object.keys(Ui));if(!(yield(0,Qe.select)(Ni.current.trace.loaded)))continue;Pi("got control action");let t=Ui[e.type];yield(0,Qe.put)({type:V}),yield(0,Qe.race)({exec:(0,Qe.call)(t,e),interrupt:(0,Qe.take)(N)}),yield(0,Qe.put)({type:G})}}const Fi=b("controller",ji);function*Mi(e){let t=void 0!==e&&void 0!==e.count?e.count:1;for(let e=0;e<t&&!(yield(0,Qe.select)(Ni.current.trace.finished));e++)yield*Mn()}function*Bi(){const e=yield(0,Qe.select)(Ni.current.location),t=yield(0,Qe.select)(Ni.current.isAnyFrameGenerated),n=yield(0,Qe.select)(Ni.stepIntoInternalSources);let r,i,a;do{yield*Mi(),r=yield(0,Qe.select)(Ni.current.location),a=yield(0,Qe.select)(Ni.current.isAnyFrameGenerated),i=yield(0,Qe.select)(Ni.current.trace.finished)}while(!i&&(!r||!n&&(r.source.internal||a)&&!e.source.internal&&!t||0===r.sourceRange.length||void 0===r.source.id||r.node&&m(r.node)||r.sourceRange.start===e.sourceRange.start&&r.sourceRange.length===e.sourceRange.length&&r.source.id===e.source.id))}function*Vi(){const e=yield(0,Qe.select)(Ni.current.functionDepth);let t,n;do{yield*Bi(),t=yield(0,Qe.select)(Ni.current.functionDepth),n=yield(0,Qe.select)(Ni.current.trace.finished)}while(!n&&t>=e)}function*Gi(){yield*Lr(),yield*Jn(),yield*li(),yield*function*(){yield(0,Qe.put)({type:at})}(),yield*Ai(),yield*Yr()}d()("debugger:ast:selectors");const Hi=(0,ae.createSelectorTree)({views:{sources:(0,ae.createLeaf)([Ee.views.sources],(e=>Object.values(e)))}}),Wi=d()("debugger:ast:sagas");function*Ki(e,t,n,r="",i=null){if(Wi("walking %s %o %o",e,r,n),yield*function*(e,t,n,r,i){if(Wi("entering %s %s",e,r),n instanceof Object)switch(void 0!==n.id&&(Wi("%s recording scope %s",r,n.id),yield*sr(n.id,r,i,t,e)),n.nodeType){case"VariableDeclaration":Wi("%s recording variable %o",r,n),yield*or(n,e);break;case"ContractDefinition":case"StructDefinition":case"EnumDefinition":case"UserDefinedValueTypeDefinition":Wi("%s recording type %o",r,n),yield*ur(n,e);break;case"EventDefinition":case"ErrorDefinition":Wi("%s recording type %o",r,n),yield*dr(n,e)}}(e,t,n,r,i),Array.isArray(n))for(let[a,s]of n.entries())yield*Ki(e,t,s,`${r}/${a}`,i);else if(n&&n.nodeType&&n.nodeType.startsWith("Yul"))yield*function*(e,t,n,r,i){yield*Yi(e,t,n,r,n,r,i)}(e,t,n,r,i);else if(n instanceof Object)for(let[i,a]of Object.entries(n))yield*Ki(e,t,a,`${r}/${i}`,n.id);yield*function*(e,t,n,r){Wi("exiting %s %s",e,r)}(e,0,0,r)}function*$i(){const e=yield(0,Qe.select)(Hi.views.sources);yield(0,Qe.all)(e.filter((({ast:e})=>e)).map((({ast:e,id:t,index:n})=>(0,Qe.call)(Ki,t,n,e)))),Wi("done visiting")}function*Yi(e,t,n,r,i,a,s){if(yield*function*(e,t,n,r,i,a,s){if(Wi("entering %s %s",e,r),n&&(void 0!==n.src&&(Wi("scoping!"),yield*cr(r,t,e,s)),"YulTypedName"===n.nodeType)){let s=qi(n,r,i,a);yield*lr(n,r,s,t,e)}}(e,t,n,r,i,a,s),Array.isArray(n))for(let[s,o]of n.entries())yield*Yi(e,t,o,`${r}/${s}`,i,a);else if(n instanceof Object)for(let[s,o]of Object.entries(n))yield*Yi(e,t,o,`${r}/${s}`,i,a);yield*function*(e,t,n,r,i,a,s){Wi("exiting %s %s",e,r)}(e,0,0,r)}function qi(e,t,n,r){Wi("pointer: %s",t),Wi("basePointer: %s",r);let i=t.slice(r.length);Wi("relativePointer: %s",i);let a=i.replace(/\/[^/]*$/,""),s=r+a;Wi("parentPointer: %s",s);let o=oe().get(n,a);return"YulBlock"===e.nodeType?"YulForLoop"===o.nodeType&&t===`${s}/pre`?s:t:"YulFunctionDefinition"===e.nodeType?t:qi(o,s,n,r)}const zi=d()("debugger:session:sagas"),Zi={[W]:function*({txHash:e,options:t}){yield*Ji(e,t)},[ie]:function*({sources:e,contexts:t,contracts:n}){zi("recording contract binaries"),yield*ea(t),zi("recording contract sources"),yield*ta(e),zi("recording other contract info"),yield*na(n),zi("refreshing instances"),yield*qn()},[re]:function*(){if(zi("session: %O",Je),!(yield(0,Qe.select)(Je.status.lightMode)))return;zi("turning on data & txlog listeners");const e=[Sr,Zr];for(const t of e)yield(0,Qe.fork)(t);zi("visiting ASTs"),yield*$i(),zi("saving allocation table"),yield*xr(),yield*function*(e=1){let t=yield(0,Qe.select)(fe.application.submoduleCount);yield(0,Qe.put)(ct(t+e))}(e.length),(yield(0,Qe.select)(Je.status.loaded))&&(yield*zr()),yield(0,Qe.put)({type:ne})}};function*Xi(){for(;;){let e=yield(0,Qe.take)(Object.keys(Zi)),t=Zi[e.type];yield(0,Qe.put)({type:z}),yield(0,Qe.race)({exec:(0,Qe.call)(t,e),interrupt:(0,Qe.take)(K)}),yield(0,Qe.put)(q())}}function*Ji(e,t){zi("fetching transaction info");let n=yield*function*(e,t){let n=yield*zt(e);if(zi("result %o",n),n.error)return n.error;zi("processing trace for addresses");let{calls:r,creations:i,selfdestructs:a}=yield*function*(e){yield(0,Qe.put)(function(e){return{type:et,steps:e}}(e));let t=new Set,n=new Set,r={};for(let i=0;i<e.length;i++){const{op:a,depth:s,stack:o,memory:c}=e[i];if(S(a))t.add(f.Evm.Utils.toAddress(o[o.length-2]));else if(I(a)){const t=e.slice(i+1).find((e=>e.depth===s));if(t){const e=t.stack,n=f.Evm.Utils.toAddress(e[e.length-1]);if(n!==f.Evm.Utils.ZERO_ADDRESS){const e=2*parseInt(o[o.length-2],16),t=2*parseInt(o[o.length-3],16),i="0x"+c.join("").substring(e,e+t).padEnd(t,"00");r[n]=i}}}else A(a)&&n.add(f.Evm.Utils.toAddress(o[o.length-1]))}return{calls:[...t],selfdestructs:[...n],creations:r}}(n.trace);n.address&&!r.includes(n.address)&&r.push(n.address),n.binary&&n.status&&!(n.storageAddress in i)&&(i[n.storageAddress]=n.binary);let s=n.block.number.toString(),o=[...r,...a,...Object.keys(i)],c=r.length;zi("obtaining binaries");let l=yield*Zt(o,s);zi("recording instances"),yield(0,Qe.all)(o.map(((e,t)=>(0,Qe.call)(ra,e,l[t],t>=c,i[e])))),zi("sending initial call"),yield*zn(n),yield*di(),yield*Ti(),(yield(0,Qe.select)(Je.status.lightMode))||(yield*zr());try{yield*er(t.storageLookup)}catch(e){return e}}(e,t);n&&(zi("error %o",n),yield*function*(e){var t;yield(0,Qe.put)((t=e,{type:Z,error:t}))}(n))}const Qi=b("session",(function*(e){zi("starting listeners"),yield*function*(e){yield(0,Qe.fork)(Xi);let t=[i,o,c];e.lightMode||(t.push(a),t.push(s));let n=[l,r];const u=t.length,d=t.concat(n);return yield*function*(e){yield(0,Qe.put)(ct(e))}(u),yield(0,Qe.all)(d.map((e=>(0,Qe.fork)(e.saga))))}(e),zi("waiting for contract information");const{contexts:t,sources:n,contracts:u}=yield(0,Qe.take)(X);zi("recording contract binaries"),yield*ea(t),zi("recording contract sources"),yield*ta(n),zi("recording other contract info"),yield*na(u),zi("waiting for start");const{txHash:d,provider:p,ensOptions:f}=yield(0,Qe.take)(H);zi("starting"),e.lightMode?(zi("setting light mode"),yield(0,Qe.put)({type:te})):(zi("visiting ASTs"),yield*$i(),zi("saving allocation table"),yield*xr()),zi("initializing adapter"),yield*un(p,f),void 0!==d&&(yield*Ji(d,e)),zi("readying"),yield*function*(){yield(0,Qe.put)(q())}()}));function*ea(e){for(const t of Object.values(e))yield*Gn(t)}function*ta(e){yield*oi(e)}function*na(e){yield*Cr(e)}function*ra(e,t,n,r){yield*Yn(e,t,r),n||(yield*Hn(e,t))}function*ia(){zi("unloading"),yield*Lr(),yield*ui(),yield*Qn(),yield*function*(){yield(0,Qe.put)({type:st})}(),yield*Ei(),yield*qr(),yield(0,Qe.put)({type:$})}const aa=d()("debugger:data:reducers"),sa={bySourceId:{}},oa={storage:{},memory:{},abi:{},calldata:{},returndata:{},event:{},state:{}},ca={byCompilationId:{}},la=(0,E.combineReducers)({scopes:function(e=sa,t){switch(t.type){case lt:{const{sourceId:n,id:r,sourceIndex:i,parentId:a,pointer:s}=t,o=void 0!==r?r:h(i,s);return{bySourceId:{...e.bySourceId,[n]:{byAstRef:{...(e.bySourceId[n]||{}).byAstRef,[o]:{...(e.bySourceId[n]||{byAstRef:{}}).byAstRef[o],id:r,parentId:a,sourceIndex:i,pointer:s,sourceId:n}}}}}}case dt:{let{sourceId:n,name:r,astRef:i,scopeAstRef:a}=t,s=e.bySourceId[n].byAstRef[a],o=s.variables||[];return{bySourceId:{...e.bySourceId,[n]:{byAstRef:{...e.bySourceId[n].byAstRef,[a]:{...s,variables:[...o,{name:r,astRef:i,sourceId:n}]}}}}}}default:return e}},contracts:function(e=ca,t){return t.type===Lt?{byCompilationId:{...e.byCompilationId,...Object.assign({},...Object.entries(t.contracts).map((([e,t])=>({[e]:{byAstId:t}}))))}}:e},userDefinedTypes:function(e=[],t){return t.type===ht?(aa("action: %O",t),[...e,{id:t.node.id,sourceId:t.sourceId}]):e},taggedOutputs:function(e=[],t){return t.type===vt?[...e,{id:t.node.id,sourceId:t.sourceId}]:e},allocations:function(e=oa,t){return t.type===xt?(aa("action: %O",t),{storage:t.storage,memory:t.memory,abi:t.abi,calldata:t.calldata,returndata:t.returndata,event:t.event,state:t.state}):e}}),ua=[[{builtin:"msg"},{location:"special",special:"msg"}],[{builtin:"tx"},{location:"special",special:"tx"}],[{builtin:"block"},{location:"special",special:"block"}],[{builtin:"this"},{location:"special",special:"this"}],[{builtin:"now"},{location:"special",special:"timestamp"}]].map((([e,t])=>C(e,t))),da={byId:Object.assign({},...ua.map((e=>({[e.id]:e}))))},pa={byAddress:{}},fa=(0,E.combineReducers)({assignments:function(e=da,t){switch(t.type){case ft:case gt:return aa("action.type %O",t.type),aa("action.assignments %O",t.assignments),{byId:{...e.byId,...t.assignments}};case bt:return da;default:return e}},mappedPaths:function(e=pa,t){switch(t.type){case gt:let{address:n,slot:r,typeIdentifier:i,parentType:a}=t;aa("typeIdentifier %s",i),i=f.Ast.Utils.regularizeTypeIdentifier(i),a=f.Ast.Utils.regularizeTypeIdentifier(a),aa("slot %o",r);let s=f.Conversion.toHexString(f.Storage.Utils.slotAddress(r),f.Evm.Utils.WORD_SIZE),o=r.path?f.Conversion.toHexString(f.Storage.Utils.slotAddress(r.path),f.Evm.Utils.WORD_SIZE):void 0,c={...e,byAddress:{...e.byAddress,[n]:{byType:{...(e.byAddress[n]||{byType:{}}).byType}}}};if(c.byAddress[n].byType={...c.byAddress[n].byType,[i]:{bySlotAddress:{...(c.byAddress[n].byType[i]||{bySlotAddress:{}}).bySlotAddress}}},void 0===c.byAddress[n].byType[i].bySlotAddress[s]){let e;aa("parentAddress %o",o),e=void 0!==o&&c.byAddress[n].byType[a]&&c.byAddress[n].byType[a].bySlotAddress[o]?{...r,path:c.byAddress[n].byType[a].bySlotAddress[o]}:r,c.byAddress[n].byType[i].bySlotAddress[s]=e}return c;case bt:return pa;default:return e}}}),ya=(0,E.combineReducers)({info:la,proc:fa}),ga=d()("debugger:evm:reducers"),ma={byContext:{}},ba=(0,E.combineReducers)({contexts:function(e=ma,t){if(t.type===mn){let n={...t};return delete n.type,n.payable=f.AbiData.Utils.abiHasPayableFallback(n.abi),{...e,byContext:{...e.byContext,[n.context]:n}}}return e}}),ha={gasprice:new(ge())(0),origin:f.Evm.Utils.ZERO_ADDRESS},va={coinbase:f.Evm.Utils.ZERO_ADDRESS,difficulty:new(ge())(0),gaslimit:new(ge())(0),number:new(ge())(0),timestamp:new(ge())(0),chainid:new(ge())(0),basefee:new(ge())(0)},La=(0,E.combineReducers)({tx:function(e=ha,t){switch(t.type){case xn:let{gasprice:n,origin:r}=t;return{gasprice:n,origin:r};case Pn:return ha;default:return e}},block:function(e=va,t){switch(t.type){case xn:return t.block;case Pn:return va;default:return e}}}),xa=(0,E.combineReducers)({blockHash:function(e=null,t){switch(t.type){case Cn:return t.blockHash;case Pn:return null;default:return e}},txIndex:function(e=null,t){switch(t.type){case Cn:return t.txIndex;case Pn:return null;default:return e}}}),Ca={byAddress:{}},Sa=(0,E.combineReducers)({globals:La,txIdentification:xa,status:function(e=null,t){switch(t.type){case Sn:return t.status;case Pn:return null;default:return e}},initialCall:function(e=null,t){switch(t.type){case In:case En:return null!==e?e:t;case Pn:return null;default:return e}},affectedInstances:function(e=Ca,t){switch(t.type){case vn:const{address:n,binary:r,context:i,creationBinary:a,creationContext:s}=t;return{byAddress:{...e.byAddress,[n]:{address:n,binary:r,context:i,creationBinary:a,creationContext:s}}};case Pn:return Ca;default:return e}}}),Ia={code:"0x",context:null,storage:{}},Aa=[{accounts:{[f.Evm.Utils.ZERO_ADDRESS]:Ia}}],Ea=(0,E.combineReducers)({callstack:function(e=[],t){switch(t.type){case In:{const{address:n,data:r,storageAddress:i,sender:a,value:s}=t;return e.concat([{address:n,data:r,storageAddress:i,sender:a,value:s}])}case En:{const{binary:n,storageAddress:r,sender:i,value:a}=t;return e.concat([{binary:n,data:"0x",storageAddress:r,sender:i,value:a}])}case Rn:case On:case wn:return e.length>1?e.slice(0,-1):e;case Nn:case Pn:return[];default:return e}},codex:function(e=Aa,t){let n,r,i;const a=(e,t,n,r)=>({...e,accounts:{...e.accounts,[t]:{code:"0x",context:null,...e.accounts[t],storage:{...(e.accounts[t]||{}).storage,[n]:r}}}}),s=(e,t,n,r)=>{let i=e.accounts[t]||{storage:{}};return{...e,accounts:{...e.accounts,[t]:{...i,code:n,context:r}}}},o=e=>({accounts:{...e.accounts,[f.Evm.Utils.ZERO_ADDRESS]:Ia}}),c=e=>e.length>2?e.slice(0,-2).concat([e[e.length-1]]):e;switch(t.type){case In:return ga("call action"),ga("codex: %O",e),r=e[e.length-1],i=o(r),[...e,i];case En:return ga("create action"),r=e[e.length-1],i=o(r),n=[...e,i],void 0!==r.accounts[t.storageAddress]||(n[n.length-1]={...r,accounts:{...r.accounts,[t.storageAddress]:Ia}}),n;case _n:{ga("store action");const{address:i,slot:s,value:o}=t;return n=e.slice(),r=n[n.length-1],n[n.length-1]=a(r,i,s,o),n}case kn:{ga("load action");const{address:n,slot:i,value:s}=t;return n===f.Evm.Utils.ZERO_ADDRESS?e:(r=e[e.length-1],void 0!==r.accounts[n].storage[i]?e:e.map((e=>a(e,n,i,s))))}case Rn:return ga("return from call"),c(e);case On:{ga("return from create");const{address:r,code:i,context:a}=t;return n=e.slice(),n[n.length-1]=s(n[n.length-1],r,i,a),ga("newState: %O",n),c(n)}case wn:return ga("fail action"),(l=e).length>2?l.slice(0,-1):l;case Nn:return ga("reset action"),[e[0]];case Pn:return ga("unload action"),Aa;case bn:{ga("adding instance");const{address:n,binary:r,context:i}=t;return e.map((e=>s(e,n,r,i)))}default:return e}var l}}),Ta=(0,E.combineReducers)({storageLookupSupported:function(e=null,t){return t.type===jn?t.status:e},storageLookup:function(e=null,t){return t.type===Un?Boolean(t.status):e}}),Ra=(0,E.combineReducers)({info:ba,transaction:Sa,proc:Ea,application:Ta});d()("debugger:ens:reducers");const Oa=(0,E.combineReducers)({cache:function(e={},t){return t.type===Ct?{...e,[t.address]:t.name}:e}}),wa=(0,E.combineReducers)({proc:Oa}),_a=(d()("debugger:sourcemapping:reducers"),{byCompilationId:{},byContext:{}}),ka=(0,E.combineReducers)({sources:function(e=_a,t){return t.type===Jr?{byCompilationId:{...e.byCompilationId,...Object.assign({},...Object.entries(t.sources.user).map((([e,t])=>({[e]:{byIndex:t.map((e=>e.id))}}))))},byContext:{...e.byContext,...Object.assign({},...Object.entries(t.sources.internal).map((([e,t])=>({[e]:{byIndex:t.map((e=>e.id))}}))))},byId:{...e.byId,...Object.assign({},...Object.values(t.sources.user).concat(Object.values(t.sources.internal)).flat().map((e=>e?{[e.id]:e}:{})))}}:e}}),Da=(0,E.combineReducers)({functionDepthStack:function(e=[],t){switch(t.type){case Qr:let r=e.slice();const i="i"===(n=t.jumpDirection)?1:"o"===n?-1:0;let a=r[r.length-1],s=r.length>1?r[r.length-2]:-1;return r[r.length-1]=Math.max(a+i,s+1),r;case ii:return[0];case ai:return[];case ei:return 0===e.length?[0]:[...e,e[e.length-1]+1];case ni:return e.length>1?e.slice(0,-1):e;default:return e}var n},nextFrameIsPhantom:function(e=null,t){switch(t.type){case ri:case ni:return!1;case ei:case ii:return t.guard;case ai:return null;default:return e}}}),Na=(0,E.combineReducers)({info:ka,proc:Da}),Pa=d()("debugger:trace:reducers"),Ua=(0,E.combineReducers)({steps:function(e=null,t){switch(t.type){case et:return t.steps;case st:return Pa("unloading"),null;default:return e}}}),ja=(0,E.combineReducers)({index:function(e=0,t){switch(t.type){case rt:return e+1;case at:case st:return 0;default:return e}},finished:function(e=!1,t){switch(t.type){case it:return!0;case at:case st:return!1;default:return e}}}),Fa=(0,E.combineReducers)({submoduleCount:function(e=0,t){return t.type===ot?t.count:e}}),Ma=(0,E.combineReducers)({transaction:Ua,proc:ja,application:Fa}),Ba=d()("debugger:controller:reducers"),Va=(0,E.combineReducers)({breakpoints:function(e=[],t){switch(t.type){case j:return e.filter((e=>e.sourceId===t.breakpoint.sourceId&&e.line===t.breakpoint.line&&e.node===t.breakpoint.node)).length>0?e:e.concat([t.breakpoint]);case F:return e.filter((e=>e.sourceId!==t.breakpoint.sourceId||e.line!==t.breakpoint.line||e.node!==t.breakpoint.node));case M:return[];default:return e}},stepIntoInternalSources:function(e=!1,t){return t.type===B?t.status:e},isStepping:function(e=!1,t){switch(t.type){case V:return Ba("got step start action"),!0;case G:return Ba("got step stop action"),!1;default:return e}}});d()("debugger:stacktrace:reducers");const Ga=(0,E.combineReducers)({callstack:function(e=[],t){let n;switch(t.type){case yi:const{location:r,functionNode:i,contractNode:a,sourceIsInternal:s,sourceIsGenerated:o}=t;return n={type:"internal",calledFromLocation:r,address:e[e.length-1].address,isConstructor:e[e.length-1].isConstructor,functionName:!i||"FunctionDefinition"!==i.nodeType&&"YulFunctionDefinition"!==i.nodeType?void 0:i.name,contractName:a&&"ContractDefinition"===a.nodeType?a.name:void 0,combineWithNextInternal:!1,sourceIsInternal:s,sourceIsGenerated:o},[...e,n];case gi:let c=e[e.length-1];return c&&"internal"===c.type?e.slice(0,-1):e;case mi:return n={type:"external",address:t.address,calledFromLocation:t.location,functionName:void 0,contractName:t.context.contractName,isConstructor:t.context.isConstructor,combineWithNextInternal:t.combineWithNextInternal},[...e,n];case vi:return v(e,t.counter,(e=>"external"===e.type));case xi:return[e[0]];case Ci:return[];default:return e}},returnCounter:function(e=0,t){switch(t.type){case hi:return e+1;case vi:case xi:case Ci:return 0;default:return e}},lastPosition:function(e=null,t){switch(t.type){case yi:case gi:case mi:case hi:case Li:case vi:const{location:n}=t;return null===n||void 0===n.source.id||n.source.internal?e:n;case xi:case Ci:return null;default:return e}},innerReturnPosition:function(e=null,t){switch(t.type){case hi:return e||t.from;case vi:case xi:case Ci:return null;default:return e}},innerReturnStatus:function(e=null,t){switch(t.type){case hi:return null===e?t.status:e;case vi:case xi:case Ci:return null;default:return e}},innerErrorIndex:function(e=null,t){switch(t.type){case hi:return null!==t.index?t.index:e;case xi:case Ci:return null;default:return e}}}),Ha=(0,E.combineReducers)({proc:Ga}),Wa=d()("debugger:txlog:reducers"),Ka={byPointer:{"":{type:"transaction",actions:[]}}},$a=(0,E.combineReducers)({transactionLog:function(e=Ka,t){const{pointer:n,newPointer:r,step:i}=t,a=e.byPointer[n];switch(t.type){case Vr:return"transaction"===a.type?{byPointer:{...e.byPointer,[n]:{...a,origin:t.address}}}:(Wa("attempt to set origin of bad node type!"),e);case Mr:return{byPointer:{...e.byPointer,[n]:{...a,actions:[...a.actions,r]},[r]:{type:"event",decoding:t.decoding,raw:t.rawEventInfo,step:i}}};case Br:return{byPointer:{...e.byPointer,[n]:{...a,actions:[...a.actions,r]},[r]:{type:"write",raw:{[t.rawSlot]:t.rawValue},steps:{[t.rawSlot]:i}}}};case Ar:return{byPointer:{...e.byPointer,[n]:{...a,actions:[...a.actions,r]},[r]:{type:"callinternal",actions:[],beginStep:i,waitingForFunctionDefinition:!0}}};case Er:return{byPointer:{...e.byPointer,[n]:{...a,absorbNextInternalCall:!1}}};case Tr:const s={...a};return"callinternal"===s.type?(s.returnKind="return",s.returnValues=t.variables,delete s.waitingForFunctionDefinition):"callexternal"===s.type?"function"===s.kind&&(s.returnValues=t.variables):Wa("returninternal once tx done!"),s.endStep=i,{byPointer:{...e.byPointer,[n]:s}};case _r:case Or:case Nr:case kr:{const s=t.type===_r||t.type===Nr;let o={...a,actions:[...a.actions,r]};"callexternal"===o.type&&"library"===o.kind&&(o.kind="message");const{address:c,binary:l,context:u,value:d,salt:p,isDelegate:f,decoding:y,calldata:g,status:m}=t;let b;b=t.type===kr||t.type===Nr?u?"constructor":"unknowncreate":t.kind;const h=u?u.contractName:void 0;let v,L;"function"!==y.kind&&"constructor"!==y.kind||(v=y.abi.name,L=y.arguments);let x={type:"callexternal",address:c,contextHash:u.context||null,value:d,kind:b,isDelegate:f,functionName:v,contractName:h,arguments:L,actions:[],beginStep:i};return"message"===b||"library"===b?x.data=g:"unknowncreate"===b&&(x.binary=l),"constructor"!==b&&"unknowncreate"!==b||(x.salt=p),s?(x.returnKind=m?"return":"revert",x.endStep=i):(x.waitingForFunctionDefinition="message"!==b,x.absorbNextInternalCall=("function"===b||"library"===b)&&t.absorbNextInternalCall),x.raw={},g&&(x.raw.calldata=g),l&&(x.raw.binary=l),{byPointer:{...e.byPointer,[n]:o,[r]:x}}}case Pr:case jr:case Ur:{let s={...a};switch("callexternal"===s.type&&"library"===s.kind&&(s.kind="message"),t.type){case Pr:s.returnKind||(s.returnKind="return");break;case jr:s.returnKind="revert",s.error=t.error;break;case Ur:s.returnKind="selfdestruct",s.beneficiary=t.beneficiary}s.endStep=i;let o,c={byPointer:{...e.byPointer,[n]:s}};for(o=n;o.replace(/\/actions\/\d+$/,"")!==r;o=o.replace(/\/actions\/\d+$/,"")){Wa("currentNode!");let e={...c.byPointer[o]};e.returnKind||(e.returnKind="unwind",e.endStep=i),delete e.waitingForFunctionDefinition,Wa("set currentNode!"),c.byPointer[o]=e}Wa("finalNode!");let l={...c.byPointer[o]};if(l.returnKind||(l.returnKind="unwind"),"function"===l.kind&&t.type===Pr&&t.decodings){const e=t.decodings.find((e=>"return"===e.kind));e&&(l.returnValues=e.arguments)}if("message"===l.kind&&t.type===Pr&&(l.returnData=t.returnData),"constructor"===l.kind&&t.type===Pr&&t.decodings){const e=t.decodings.find((e=>"bytecode"===e.kind));e&&e.immutables&&(l.returnImmutables=e.immutables)}return l.endStep=i,delete l.waitingForFunctionDefinition,delete l.absorbNextInternalCall,Wa("set finalNode!"),c.byPointer[o]=l,c}case Fr:{const{functionNode:r,contractNode:i,variables:s}=t,o=r.name||void 0,c=i&&"ContractDefinition"===i.nodeType?i.name:null;let l={...a,waitingForFunctionDefinition:!1};return l.functionName||(l.functionName=o),l.contractName||(l.contractName=c),l.arguments||(l.arguments=s),"callexternal"===l.type&&"library"===l.kind&&(l.kind="function",delete l.data),{byPointer:{...e.byPointer,[n]:l}}}case Gr:return{byPointer:{"":{type:"transaction",origin:e.byPointer[""].origin,actions:[]}}};case Hr:return Ka;default:return e}},currentNodePointer:function(e="",t){switch(t.type){case Ar:case Or:case kr:case Tr:case Pr:case jr:case Ur:return t.newPointer;case Gr:case Hr:return"";default:return e}},pointerStack:function(e=[],t){switch(t.type){case Or:case kr:return[...e,t.newPointer];case Pr:case jr:case Ur:return e.slice(0,-1);case Gr:case Hr:return[];default:return e}}}),Ya=(0,E.combineReducers)({initialCall:function(e=null,t){switch(t.type){case Or:case kr:return null!==e?e:t;case Hr:return null;default:return e}}}),qa=(0,E.combineReducers)({proc:$a,transaction:Ya}),za=d()("debugger:session:reducers"),Za=(0,E.combineReducers)({ready:function(e=!1,t){switch(t.type){case Y:return za("readying"),!0;case z:return!1;default:return e}},lastLoadingError:function(e=null,t){switch(t.type){case Z:return za("error: %o",t.error),t.error;case z:return null;default:return e}},transaction:function(e={},t){switch(t.type){case J:return t.transaction;case $:return{};default:return e}},receipt:function(e={},t){switch(t.type){case Q:return t.receipt;case $:return{};default:return e}},block:function(e={},t){switch(t.type){case ee:return t.block;case $:return{};default:return e}},lightMode:function(e=!1,t){switch(t.type){case te:return!0;case ne:return!1;default:return e}}}),Xa=(0,E.combineReducers)({session:Za,data:ya,ens:wa,txlog:qa,evm:Ra,sourcemapping:Na,stacktrace:Ha,trace:Ma,controller:Va});var Ja=n(583);const Qa=d()("debugger:session");class es{constructor(e,t,n,r){const{store:i,sagaMiddleware:a}=function(e,t,n,r,i){const a=R()();i||(i=E.compose);let s=(0,E.createStore)(e,r,i((0,E.applyMiddleware)(a)));return a.run(t,...n),{store:s,sagaMiddleware:a}}(Xa,Qi,[n]);this._store=i,this._sagaMiddleware=a;const{contexts:s,sources:o,contracts:c}=es.normalize(e);this._store.dispatch(function(e,t,n){return{type:X,contexts:e,sources:t,contracts:n}}(s,o,c)),this._ready=new Promise(((e,t)=>{const n=this._store.subscribe((()=>{this.view(Je.status.ready)?(Qa("ready!"),n(),e()):this.view(Je.status.errored)&&(Qa("error!"),n(),t(this.view(Je.status.error)))}))}));const l=n?.ens?.registryAddress;if(l&&!Mt.utils.isAddress(l))throw new Error(`Error: Invalid address ${l}`);this._store.dispatch(function(e,t,n={}){return{type:H,provider:e,txHash:t,ensOptions:n}}(t,r,n.ens))}async ready(){await this._ready}async readyAgainAfterLoading(e){return new Promise(((t,n)=>{let r=!1;Qa("reready listener set up");const i=this._store.subscribe((()=>{Qa("reready?"),r?this.view(Je.status.ready)?(Qa("reready!"),i(),t(!0)):this.view(Je.status.errored)&&(i(),Qa("error!"),n(this.view(Je.status.error))):this.view(Je.status.waiting)&&(Qa("started waiting"),r=!0)}));this.dispatch(e)}))}static normalize(e){let t=[],n={user:{},internal:{}},r={};const i=(e,t,n)=>x({compilationId:e,contextHash:t,index:n});for(const a of e){if(a.unreliableSourceOrder)throw new Error(`Error: Compilation ${a.id} has unreliable source order.`);const e=a.compiler,s=a.settings;n.user[a.id]=[],r[a.id]={};for(let t in a.sources){t=Number(t);let r=a.sources[t];if(!r)continue;let o=r.ast;o&&!o.nodeType&&(o=void 0),n.user[a.id][t]={...r,ast:o,compiler:r.compiler||e,settings:r.settings||s,compilationId:a.id,index:t,id:i(a.id,null,t),internal:!1}}for(let e of a.contracts){let s,o,{contractName:c,bytecode:l,sourceMap:u,deployedBytecode:d,deployedSourceMap:y,immutableReferences:g,abi:m,compiler:b,settings:h,primarySourceId:v,generatedSources:x,deployedGeneratedSources:C}=e;Qa("contractName: %s",c),"object"==typeof l&&(l=Ja.Shims.NewToLegacy.forBytecode(l)),"object"==typeof d&&(d=Ja.Shims.NewToLegacy.forBytecode(d)),void 0!==v&&(s=a.sources.findIndex((e=>e&&e.id===v))),void 0!==s&&(o=a.sources[s].language);const S=f.Compilations.Utils.getContractNode(e,a),I=S?S.id:void 0,A=S?S.contractKind:void 0,E=S?S.linearizedBaseContracts:void 0;if(m=p.normalize(m),Qa("contractName %s",c),Qa("sourceMap %o",u),Qa("compiler %o",b),Qa("abi %o",m),I&&(r[a.id][I]={compilationId:a.id,contractId:I,abi:m,deployedContext:null,constructorContext:null}),u=f.Compilations.Utils.simpleShimSourceMap(u),y=f.Compilations.Utils.simpleShimSourceMap(y),l&&"0x"!=l){const e=L({type:"string",value:l});if(t.push({context:e,contractName:c,binary:l,sourceMap:u,primarySource:s,abi:m,compiler:b,settings:h,compilationId:a.id,contractId:I,contractKind:A,linearizedBaseContracts:E,primaryLanguage:o,isConstructor:!0}),x){n.internal[e]=[];for(let t in x){t=Number(t);const r=x[t];r&&(n.internal[e][t]={...r,compiler:r.compiler||b,settings:r.settings||h,compilationId:a.id,index:t,id:i(a.id,e,t),internal:!0,internalFor:e})}}I&&(r[a.id][I].constructorContext=e)}if(d&&"0x"!=d){const e=L({type:"string",value:d});if(t.push({context:e,contractName:c,binary:d,sourceMap:y,primarySource:s,immutableReferences:g,abi:m,compiler:b,settings:h,compilationId:a.id,contractId:I,contractKind:A,linearizedBaseContracts:E,primaryLanguage:o,isConstructor:!1}),C){n.internal[e]=[];for(let t in C){t=Number(t);const r=C[t];r&&(n.internal[e][t]={...r,compiler:r.compiler||b,settings:r.settings||h,compilationId:a.id,index:t,id:i(a.id,e,t),internal:!0,internalFor:e})}}I&&(r[a.id][I].deployedContext=e)}}}return t=Object.assign({},...t.map((e=>({[e.context]:{...e}})))),t=f.Contexts.Utils.normalizeContexts(t),{contexts:t,sources:n,contracts:r}}get state(){return this._store.getState()}view(e){return e(this.state)}async dispatch(e){return this._store.dispatch(e),!0}async _runSaga(e,...t){return await this._sagaMiddleware.run(e,...t).toPromise()}async interrupt(){await this.dispatch({type:K}),await this.dispatch({type:N})}async doneStepping(e){return new Promise((t=>{let n=!1;const r=this._store.subscribe((()=>{const e=this.view(Ni.isStepping);!e||n?!e&&n&&(r(),t(!0)):n=!0}));this.dispatch(e)}))}async load(e,t={}){return!this.view(Je.status.loaded)&&await this.readyAgainAfterLoading(function(e,t){return{type:W,txHash:e,options:t}}(e,t))}async unload(){return!!this.view(Je.status.loaded)&&(Qa("unloading"),await this._runSaga(ia),!0)}async advance(e){return await this.doneStepping(function(e){return{type:O,count:e}}(e))}async stepNext(){return await this.doneStepping({type:w})}async stepOver(){return await this.doneStepping({type:_})}async stepInto(){return await this.doneStepping({type:k})}async stepOut(){return await this.doneStepping({type:D})}async reset(){if(this.view(Je.status.loaded))return await this._runSaga(Gi)}async runToEnd(){return await this.dispatch({type:P})}async continueUntilBreakpoint(e){return await this.doneStepping(function(e){return{type:U,breakpoints:e}}(e))}async addBreakpoint(e){return await this.dispatch(function(e){return{type:j,breakpoint:e}}(e))}async removeBreakpoint(e){return await this.dispatch(function(e){return{type:F,breakpoint:e}}(e))}async removeAllBreakpoints(){return await this.dispatch({type:M})}async setInternalStepping(e){return await this.dispatch((t=e,{type:B,status:t}));var t}async decodeReady(){return!0}async variable(e){const t=this.view(Ke.current.identifiers.definitions),n=this.view(Ke.current.identifiers.refs),r=this.view(Ke.current.compilationId);return Qa("name: %s",e),Qa("refs: %O",n),Qa("definitions: %o",t),await this._runSaga(mr,t[e],n[e],r)}async variables(){if(!this.view(Je.status.loaded))return{};let e=this.view(Ke.current.identifiers.definitions),t=this.view(Ke.current.identifiers.refs),n=this.view(Ke.current.compilationId),r={};for(let[i,a]of Object.entries(t))i in e&&(r[i]=await this._runSaga(mr,e[i],a,n));return r}async returnValue(){return this.view(Je.status.loaded)&&this.view(ve.current.step.isHalting)?await this._runSaga(br):null}callstack(){return this.view(Je.status.loaded)?this.view(Ne.current.report):null}stacktrace(){return this.view(Je.status.loaded)?this.view(Ne.current.finalReport):null}connect(){return this}async addExternalCompilations(e){const{contexts:t,sources:n,contracts:r}=es.normalize(e);return await this.dispatch(function(e,t,n){return{type:ie,sources:e,contexts:t,contracts:n}}(n,t,r))}async startFullMode(){return await this.dispatch({type:re})}get selectors(){return(0,ae.createNestedSelector)({ast:Hi,data:Ke,ens:fn,txlog:Ze,trace:fe,evm:ve,sourcemapping:Ee,stacktrace:Ne,session:Je,controller:Ni})}}d()("debugger");const ts={forTx:async function(e,t={}){const{contracts:n,files:r,provider:i,compilations:a,lightMode:s,storageLookup:o,ens:c}=t;a||(a=f.Compilations.Utils.shimArtifacts(n,r));let l=new es(a,i,{lightMode:s,storageLookup:o,ens:c},e);return await l.ready(),l},forProject:async function(e={}){const{contracts:t,files:n,provider:r,compilations:i,lightMode:a,ens:s}=e;i||(i=f.Compilations.Utils.shimArtifacts(t,n));let o=new es(i,r,{lightMode:a,ens:s});return await o.ready(),o},get selectors(){return(0,ae.createNestedSelector)({ast:Hi,data:Ke,ens:fn,txlog:Ze,trace:fe,evm:ve,sourcemapping:Ee,stacktrace:Ne,session:Je,controller:Ni})}},ns=ts},346:e=>{"use strict";class t extends Error{constructor(e){super(e),this.name=this.constructor.name,this.stack=""}}e.exports=t},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")},837:e=>{"use strict";e.exports=require("util")}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(529)})()));
//# sourceMappingURL=debugger.js.map